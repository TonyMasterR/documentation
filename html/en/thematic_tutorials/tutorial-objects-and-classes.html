<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial: Objects and Classes in Python and Sage &mdash; Thematic Tutorials v6.10</title>
    
    <link rel="stylesheet" href="_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '6.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Thematic Tutorials v6.10" href="index.html" />
    <link rel="up" title="Thematic tutorial document tree" href="toctree.html" />
    <link rel="next" title="Functional Programming for Mathematicians" href="functional_programming.html" />
    <link rel="prev" title="Tutorial: Comprehensions, Iterators, and Iterables" href="tutorial-comprehensions.html" />
    <link rel="icon" href="_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="functional_programming.html" title="Functional Programming for Mathematicians"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial-comprehensions.html" title="Tutorial: Comprehensions, Iterators, and Iterables"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="index.html">Thematic Tutorials v6.10</a> &raquo;</li>

          <li><a href="toctree.html" accesskey="U">Thematic tutorial document tree</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tutorial-objects-and-classes-in-python-and-sage">
<span id="tutorial-objects-and-classes"></span><h1>Tutorial: Objects and Classes in Python and Sage<a class="headerlink" href="#tutorial-objects-and-classes-in-python-and-sage" title="Permalink to this headline">¶</a></h1>
<p><em>Author: Florent Hivert &lt;<a class="reference external" href="mailto:florent&#46;hivert&#37;&#52;&#48;univ-rouen&#46;fr">florent<span>&#46;</span>hivert<span>&#64;</span>univ-rouen<span>&#46;</span>fr</a>&gt;</em></p>
<p>This tutorial is an introduction to object-oriented programming in Python and
Sage. It requires basic knowledge about imperative/procedural programming (the
most common programming style) &#8211; that is, conditional instructions, loops,
functions (see the &#8220;Programming&#8221; section of the Sage tutorial) &#8211; but no further knowledge
about objects and classes is assumed. It is designed as an alternating
sequence of formal introduction and exercises. <a class="reference internal" href="#solutions"><em>Solutions to the exercises</em></a> are given at
the end.</p>
<div class="section" id="foreword-variables-names-and-objects">
<h2>Foreword: variables, names and objects<a class="headerlink" href="#foreword-variables-names-and-objects" title="Permalink to this headline">¶</a></h2>
<p>As an object-oriented language, Python&#8217;s &#8216;&#8217;variables&#8217;&#8217; behavior may be
surprising for people used to imperative languages like C or Maple. The reason
is that they are <strong>not variables but names</strong>.</p>
<p>The following explanation is <a class="reference external" href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#python-has-names">borrowed from
David Goodger</a>.</p>
</div>
<div class="section" id="other-languages-have-variables">
<h2>Other languages have &#8220;variables&#8221;<a class="headerlink" href="#other-languages-have-variables" title="Permalink to this headline">¶</a></h2>
<div class="handout container">
In many other languages, assigning to a variable puts a value into
a box.</div>
<table border="1" class="incremental borderless docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre>int a = 1;
</pre></div>
</div>
</td>
<td><img alt="_images/a1box.png" class="incremental first last" src="_images/a1box.png" />
</td>
</tr>
</tbody>
</table>
<div class="handout container">
<p>Box &#8220;a&#8221; now contains an integer 1.</p>
<p>Assigning another value to the same variable replaces the contents
of the box:</p>
</div>
<table border="1" class="incremental borderless docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</pre></div>
</div>
</td>
<td><img alt="_images/a2box.png" class="incremental first last" src="_images/a2box.png" />
</td>
</tr>
</tbody>
</table>
<div class="handout container">
<p>Now box &#8220;a&#8221; contains an integer 2.</p>
<p>Assigning one variable to another makes a copy of the value and
puts it in the new box:</p>
</div>
<table border="1" class="incremental borderless docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre>int b = a;
</pre></div>
</div>
</td>
<td><img alt="_images/b2box.png" class="incremental first last" src="_images/b2box.png" />
</td>
<td><img alt="_images/a2box.png" class="incremental first last" src="_images/a2box.png" />
</td>
</tr>
</tbody>
</table>
<div class="handout container">
&#8220;b&#8221; is a second box, with a copy of integer 2.  Box &#8220;a&#8221; has a
separate copy.</div>
</div>
<div class="section" id="python-has-names">
<h2>Python has &#8220;names&#8221;<a class="headerlink" href="#python-has-names" title="Permalink to this headline">¶</a></h2>
<div class="handout container">
In Python, a &#8220;name&#8221; or &#8220;identifier&#8221; is like a parcel tag (or
nametag) attached to an object.</div>
<table border="1" class="incremental borderless docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</td>
<td><img alt="_images/a1tag.png" class="incremental first last" src="_images/a1tag.png" />
</td>
</tr>
</tbody>
</table>
<div class="handout container">
<p>Here, an integer 1 object has a tag labelled &#8220;a&#8221;.</p>
<p>If we reassign to &#8220;a&#8221;, we just move the tag to another object:</p>
</div>
<table border="1" class="incremental borderless docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</td>
<td><img alt="_images/a2tag.png" class="incremental first last" src="_images/a2tag.png" />
</td>
<td><img alt="_images/1.png" class="incremental first last" src="_images/1.png" />
</td>
</tr>
</tbody>
</table>
<div class="handout container">
<p>Now the name &#8220;a&#8221; is attached to an integer 2 object.</p>
<p>The original integer 1 object no longer has a tag &#8220;a&#8221;.  It may live
on, but we can&#8217;t get to it through the name &#8220;a&#8221;.  (When an object
has no more references or tags, it is removed from memory.)</p>
<p>If we assign one name to another, we&#8217;re just attaching another
nametag to an existing object:</p>
</div>
<table border="1" class="incremental borderless docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-python"><div class="highlight"><pre><span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
</pre></div>
</div>
</td>
<td><img alt="_images/ab2tag.png" class="incremental first last" src="_images/ab2tag.png" />
</td>
</tr>
</tbody>
</table>
<div class="handout container">
<p>The name &#8220;b&#8221; is just a second tag bound to the same object as &#8220;a&#8221;.</p>
<p>Although we commonly refer to &#8220;variables&#8221; even in Python (because
it&#8217;s common terminology), we really mean &#8220;names&#8221; or &#8220;identifiers&#8221;.
In Python, &#8220;variables&#8221; are nametags for values, not labelled boxes.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>As a consequence, when there are <strong>two tags</strong> &#8220;a&#8221; and &#8220;b&#8221; on the <strong>same
object</strong>, modifying the object tagged &#8220;b&#8221; also modifies the object tagged
&#8220;a&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<span class="gp">sage: </span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">sage: </span><span class="n">a</span>
<span class="go">[1, 0, 3]</span>
</pre></div>
</div>
<p>Note that reassigning the tag &#8220;b&#8221; (rather than modifying the object
with that tag) doesn&#8217;t affect the object tagged &#8220;a&#8221;:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="mi">7</span>
<span class="gp">sage: </span><span class="n">b</span>
<span class="go">7</span>
<span class="gp">sage: </span><span class="n">a</span>
<span class="go">[1, 0, 3]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="object-oriented-programming-paradigm">
<h2>Object-oriented programming paradigm<a class="headerlink" href="#object-oriented-programming-paradigm" title="Permalink to this headline">¶</a></h2>
<p>The <strong>object-oriented programming</strong> paradigm relies on the two following
fundamental rules:</p>
<ol class="arabic simple">
<li>Anything of the real (or mathematical) world which needs to be manipulated
by the computer is modeled by an <strong>object</strong>.</li>
<li>Each object is an <strong>instance</strong> of some <strong>class</strong>.</li>
</ol>
<p>At this point, those two rules are a little meaningless, so let&#8217;s give some
more or less precise definitions of the terms:</p>
<hr class="docutils" />
<dl class="docutils">
<dt><strong>object</strong></dt>
<dd>a <strong>portion of memory</strong> which contains the information needed to model
the real world thing.</dd>
<dt><strong>class</strong></dt>
<dd>defines the <strong>data structure</strong> used to store the objects which are instances
of the class together with their <strong>behavior</strong>.</dd>
</dl>
<hr class="docutils" />
<p>Let&#8217;s start with some examples: We consider the vector space over <span class="math">\(\QQ\)</span> whose
basis is indexed by permutations, and a particular element in it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">F</span> <span class="o">=</span> <span class="n">CombinatorialFreeModule</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="n">Permutations</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="mi">3</span><span class="o">*</span><span class="n">F</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span><span class="o">+</span> <span class="n">F</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span>
<span class="go">B[[1, 2, 3]] + 3*B[[1, 3, 2]]</span>
</pre></div>
</div>
<p>(For each permutation, say <tt class="docutils literal"><span class="pre">[1,</span> <span class="pre">3,</span> <span class="pre">2]</span></tt>, the corresponding element in
<tt class="docutils literal"><span class="pre">F</span></tt> is denoted by <tt class="docutils literal"><span class="pre">B[[1,</span> <span class="pre">3,</span> <span class="pre">2]]</span></tt> &#8211; in a <tt class="docutils literal"><span class="pre">CombinatorialFreeModule</span></tt>,
if an element is indexed by <tt class="docutils literal"><span class="pre">x</span></tt>, then by default its print
representation is <tt class="docutils literal"><span class="pre">B[x]</span></tt>.)</p>
<p>In Python, everything is an object so there isn&#8217;t any difference between types
and classes. One can get the class of the object <tt class="docutils literal"><span class="pre">el</span></tt> by:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
<span class="go">&lt;class &#39;sage.combinat.free_module.CombinatorialFreeModule_with_category.element_class&#39;&gt;</span>
</pre></div>
</div>
<p>As such, this is not very informative. We&#8217;ll come back to it later. The data
associated to objects are stored in so-called <strong>attributes</strong>. They are
accessed through the syntax <tt class="docutils literal"><span class="pre">obj.attribute_name</span></tt>. For an element of a
combinatorial free module, the main attribute is called
<tt class="docutils literal"><span class="pre">_monomial_coefficients</span></tt>. It is a dictionary associating coefficients to
indices:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">_monomial_coefficients</span>
<span class="go">{[1, 2, 3]: 1, [1, 3, 2]: 3}</span>
</pre></div>
</div>
<p>Modifying the attribute modifies the objects:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">_monomial_coefficients</span><span class="p">[</span><span class="n">Permutation</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span>
<span class="gp">sage: </span><span class="n">el</span>
<span class="go">B[[1, 2, 3]] + 3*B[[1, 3, 2]] + 1/2*B[[3, 2, 1]]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">as a user, you are <em>not</em> supposed to do such a modification by
yourself (see note on <a class="reference internal" href="#private-attributes"><em>private attributes</em></a> below).</p>
</div>
<p>As an element of a vector space, <tt class="docutils literal"><span class="pre">el</span></tt> has a particular behavior:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="mi">2</span><span class="o">*</span><span class="n">el</span>
<span class="go">2*B[[1, 2, 3]] + 6*B[[1, 3, 2]] + B[[3, 2, 1]]</span>
<span class="gp">sage: </span><span class="nb">sorted</span><span class="p">(</span><span class="n">el</span><span class="o">.</span><span class="n">support</span><span class="p">())</span>
<span class="go">[[1, 2, 3], [1, 3, 2], [3, 2, 1]]</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">coefficient</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">1</span>
</pre></div>
</div>
<p>The behavior is defined through <strong>methods</strong> (<tt class="docutils literal"><span class="pre">support</span></tt>, <tt class="docutils literal"><span class="pre">coefficient</span></tt>). Note
that this is true even for equality, printing or mathematical operations. For
example, the call <tt class="docutils literal"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">b</span></tt> actually is translated to the method call
<tt class="docutils literal"><span class="pre">a.__eq__(b)</span></tt>. The names of those special methods which are usually called
through operators are fixed by the Python language and are of the form
<tt class="docutils literal"><span class="pre">__name__</span></tt>. Examples include <tt class="docutils literal"><span class="pre">__eq__</span></tt> and <tt class="docutils literal"><span class="pre">__le__</span></tt> for operators <tt class="docutils literal"><span class="pre">==</span></tt> and
<tt class="docutils literal"><span class="pre">&lt;=</span></tt>, <tt class="docutils literal"><span class="pre">__repr__</span></tt> (see <a class="reference internal" href="#sage-specifics"><em>Sage specifics about classes</em></a>) for printing, <tt class="docutils literal"><span class="pre">__add__</span></tt> and
<tt class="docutils literal"><span class="pre">__mult__</span></tt> for operators <tt class="docutils literal"><span class="pre">+</span></tt> and <tt class="docutils literal"><span class="pre">*</span></tt>.  See
<a class="reference external" href="http://docs.python.org/library/">http://docs.python.org/library/</a> for a complete list.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="n">F</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">__repr__</span><span class="p">()</span>
<span class="go">&#39;B[[1, 2, 3]] + 3*B[[1, 3, 2]] + 1/2*B[[3, 2, 1]]&#39;</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">__mul__</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">2*B[[1, 2, 3]] + 6*B[[1, 3, 2]] + B[[3, 2, 1]]</span>
</pre></div>
</div>
<p>Some particular actions modify the data structure of <tt class="docutils literal"><span class="pre">el</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s">&quot;bla&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span>
<span class="go">bla</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The class is stored in a particular attribute called <tt class="docutils literal"><span class="pre">__class__</span></tt>,
and the normal attributes are stored in a dictionary called <tt class="docutils literal"><span class="pre">__dict__</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">F</span> <span class="o">=</span> <span class="n">CombinatorialFreeModule</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="n">Permutations</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="mi">3</span><span class="o">*</span><span class="n">F</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span><span class="o">+</span> <span class="n">F</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">__class__</span>
<span class="go"> &lt;class &#39;sage.combinat.free_module.CombinatorialFreeModule_with_category.element_class&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">el</span><span class="o">.</span><span class="n">__dict__</span>
<span class="go">{&#39;__custom_name&#39;: &#39;foo&#39;,</span>
<span class="go"> &#39;_monomial_coefficients&#39;: {[1, 2, 3]: 1, [1, 3, 2]: 3}}</span>
</pre></div>
</div>
<p>Lots of Sage objects are not Python objects but compiled Cython
objects. Python sees them as builtin objects and you don&#8217;t have access to
the data structure. Examples include integers and permutation group
elements:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">e</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">&lt;type &#39;sage.rings.integer.Integer&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">e</span><span class="o">.</span><span class="n">__dict__</span>
<span class="go">&lt;dictproxy {&#39;__doc__&#39;: ...</span>
<span class="go"> &#39;_sage_src_lines_&#39;: &lt;staticmethod object at 0x...&gt;}&gt;</span>
<span class="gp">sage: </span><span class="n">e</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;__module__&#39;, &#39;_reduction&#39;, &#39;__doc__&#39;, &#39;_sage_src_lines_&#39;]</span>

<span class="gp">sage: </span><span class="n">id4</span> <span class="o">=</span> <span class="n">SymmetricGroup</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">id4</span><span class="p">)</span>
<span class="go">&lt;type &#39;sage.groups.perm_gps.permgroup_element.PermutationGroupElement&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">id4</span><span class="o">.</span><span class="n">__dict__</span>
<span class="go">&lt;dictproxy {&#39;__doc__&#39;: ...</span>
<span class="go">&#39;_sage_src_lines_&#39;: &lt;staticmethod object at 0x...&gt;}&gt;</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Each object corresponds to a portion of memory called its <strong>identity</strong> in
Python. You can get the identity using <tt class="docutils literal"><span class="pre">id</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">el</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">id</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>  <span class="c"># random</span>
<span class="go">139813642977744</span>
<span class="gp">sage: </span><span class="n">el1</span> <span class="o">=</span> <span class="n">el</span><span class="p">;</span> <span class="nb">id</span><span class="p">(</span><span class="n">el1</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">el1</span> <span class="ow">is</span> <span class="n">el</span>
<span class="go">True</span>
</pre></div>
</div>
<p>In Python (and therefore in Sage), two objects with the same
identity will be equal, but the converse is not true in general.
Thus the identity function is different from mathematical
identity:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">el2</span> <span class="o">=</span> <span class="n">Integer</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">el2</span> <span class="o">==</span> <span class="n">el1</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">el2</span> <span class="ow">is</span> <span class="n">el1</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="nb">id</span><span class="p">(</span><span class="n">el2</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">el</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h3>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h3>
<p>To define some object, you first have to write a <strong>class</strong>. The class will
define the methods and the attributes of the object.</p>
<dl class="docutils">
<dt><strong>method</strong></dt>
<dd>particular kind of function associated with an object used to get
information about the object or to manipulate it.</dd>
<dt><strong>attribute</strong></dt>
<dd>variable where information about the object is stored.</dd>
</dl>
</div>
<div class="section" id="an-example-glass-of-beverage-in-a-restaurant">
<h3>An example: glass of beverage in a restaurant<a class="headerlink" href="#an-example-glass-of-beverage-in-a-restaurant" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s write a small class about glasses in a restaurant:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">Glass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="go">....:     def __init__(self, size):</span>
<span class="go">....:         assert size &gt; 0</span>
<span class="go">....:         self._size = float(size)  # an attribute</span>
<span class="go">....:         self._content = float(0.0)  # another attribute</span>
<span class="go">....:     def __repr__(self):</span>
<span class="go">....:         if self._content == 0.0:</span>
<span class="go">....:             return &quot;An empty glass of size %s&quot;%(self._size)</span>
<span class="go">....:         else:</span>
<span class="go">....:             return &quot;A glass of size %s cl containing %s cl of water&quot;%(</span>
<span class="go">....:                     self._size, self._content)</span>
<span class="go">....:     def fill(self):</span>
<span class="go">....:         self._content = self._size</span>
<span class="go">....:     def empty(self):</span>
<span class="go">....:         self._content = float(0.0)</span>
</pre></div>
</div>
<p>Let&#8217;s create a small glass:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">myGlass</span> <span class="o">=</span> <span class="n">Glass</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="n">myGlass</span>
<span class="go">An empty glass of size 10.0</span>
<span class="gp">sage: </span><span class="n">myGlass</span><span class="o">.</span><span class="n">fill</span><span class="p">();</span> <span class="n">myGlass</span>
<span class="go">A glass of size 10.0 cl containing 10.0 cl of water</span>
<span class="gp">sage: </span><span class="n">myGlass</span><span class="o">.</span><span class="n">empty</span><span class="p">();</span> <span class="n">myGlass</span>
<span class="go">An empty glass of size 10.0</span>
</pre></div>
</div>
<p>Some comments:</p>
<ol class="arabic simple">
<li>The definition of the class <tt class="docutils literal"><span class="pre">Glass</span></tt> defines two attributes,
<tt class="docutils literal"><span class="pre">_size</span></tt> and <tt class="docutils literal"><span class="pre">_content</span></tt>.  It defines four methods, <tt class="docutils literal"><span class="pre">__init__</span></tt>,
<tt class="docutils literal"><span class="pre">__repr__</span></tt>, <tt class="docutils literal"><span class="pre">fill</span></tt>, and <tt class="docutils literal"><span class="pre">empty</span></tt>.  (Any instance of this class
will also have other attributes and methods, inherited from the
class <tt class="docutils literal"><span class="pre">object</span></tt>.  See <a class="reference internal" href="#id1"><em>Inheritance</em></a> below.)</li>
<li>The method <tt class="docutils literal"><span class="pre">__init__</span></tt> is used to initialize the object: it is used by the
so-called <strong>constructor</strong> of the class that is executed when calling
<tt class="docutils literal"><span class="pre">Glass(10)</span></tt>.</li>
<li>The method <tt class="docutils literal"><span class="pre">__repr__</span></tt> returns a string which is used to
print the object, for example in this case when evaluating <tt class="docutils literal"><span class="pre">myGlass</span></tt>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Private Attributes</strong></p>
<ul class="last simple" id="private-attributes">
<li>Most of the time, in order to ensure consistency of the data structures,
the user is not supposed to directly change certain attributes of an
object. Those attributes are called <strong>private</strong>. Since there is no
mechanism to ensure privacy in Python, the convention is the following:
private attributes have names beginning with an underscore.</li>
<li>As a consequence, attribute access is only made through methods. Methods
for reading or writing a private attribute are called accessors.</li>
<li>Methods which are only for internal use are also prefixed with an
underscore.</li>
</ul>
</div>
</div>
<div class="section" id="exercises">
<h3>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Add a method <tt class="docutils literal"><span class="pre">is_empty</span></tt> which returns true if a glass is empty.</li>
<li>Define a method <tt class="docutils literal"><span class="pre">drink</span></tt> with a parameter <tt class="docutils literal"><span class="pre">amount</span></tt> which allows one to
partially drink the water in the glass. Raise an error if one asks to
drink more water than there is in the glass or a negative amount of
water.</li>
<li>Allows the glass to be filled with wine, beer or another beverage. The method
<tt class="docutils literal"><span class="pre">fill</span></tt> should accept a parameter <tt class="docutils literal"><span class="pre">beverage</span></tt>. The beverage is stored in
an attribute <tt class="docutils literal"><span class="pre">_beverage</span></tt>. Update the method <tt class="docutils literal"><span class="pre">__repr__</span></tt> accordingly.</li>
<li>Add an attribute <tt class="docutils literal"><span class="pre">_clean</span></tt> and methods <tt class="docutils literal"><span class="pre">is_clean</span></tt> and <tt class="docutils literal"><span class="pre">wash</span></tt>. At the
creation a glass is clean, as soon as it&#8217;s filled it becomes dirty,
and it must be washed to become clean again.</li>
<li>Test everything.</li>
<li>Make sure that everything is tested.</li>
<li>Test everything again.</li>
</ol>
</div>
</div>
<div class="section" id="inheritance">
<h2>Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline">¶</a></h2>
<p id="id1">The problem: objects of <strong>different</strong> classes may share a <strong>common behavior</strong>.</p>
<p>For example, if one wants to deal with different dishes (forks, spoons, ...),
then there is common behavior (becoming dirty and being washed). So the
different classes associated to the different kinds of dishes should have the
same <tt class="docutils literal"><span class="pre">clean</span></tt>, <tt class="docutils literal"><span class="pre">is_clean</span></tt> and <tt class="docutils literal"><span class="pre">wash</span></tt> methods. But copying and pasting
code is very bad for maintenance: mistakes are copied, and to change anything
one has to remember the location of all the copies. So there is a need for a
mechanism which allows the programmer to factorize the common behavior. It is called
<strong>inheritance</strong> or <strong>sub-classing</strong>: one writes a base class which factorizes
the common behavior and then reuses the methods from this class.</p>
<p>We first write a small class &#8216;&#8217;AbstractDish&#8217;&#8217; which implements the
&#8220;clean-dirty-wash&#8221; behavior:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">AbstractDish</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="go">....:     def __init__(self):</span>
<span class="go">....:         self._clean = True</span>
<span class="go">....:     def is_clean(self):</span>
<span class="go">....:         return self._clean</span>
<span class="go">....:     def state(self):</span>
<span class="go">....:         return &quot;clean&quot; if self.is_clean() else &quot;dirty&quot;</span>
<span class="go">....:     def __repr__(self):</span>
<span class="go">....:         return &quot;An unspecified %s dish&quot;%self.state()</span>
<span class="go">....:     def _make_dirty(self):</span>
<span class="go">....:         self._clean = False</span>
<span class="go">....:     def wash(self):</span>
<span class="go">....:         self._clean = True</span>
</pre></div>
</div>
<p>Now one can reuse this behavior within a class <tt class="docutils literal"><span class="pre">Spoon</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">Spoon</span><span class="p">(</span><span class="n">AbstractDish</span><span class="p">):</span>  <span class="c"># Spoon inherits from AbstractDish</span>
<span class="go">....:     def __repr__(self):</span>
<span class="go">....:         return &quot;A %s spoon&quot;%self.state()</span>
<span class="go">....:     def eat_with(self):</span>
<span class="go">....:         self._make_dirty()</span>
</pre></div>
</div>
<p>Let&#8217;s test it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Spoon</span><span class="p">();</span> <span class="n">s</span>
<span class="go">A clean spoon</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">is_clean</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">eat_with</span><span class="p">();</span> <span class="n">s</span>
<span class="go">A dirty spoon</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">is_clean</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">wash</span><span class="p">();</span> <span class="n">s</span>
<span class="go">A clean spoon</span>
</pre></div>
</div>
<div class="section" id="id2">
<h3>Summary<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Any class can reuse the behavior of another class. One says that the
subclass <strong>inherits</strong> from the superclass or that it <strong>derives</strong> from it.</p>
</li>
<li><p class="first">Any instance of the subclass is also an instance of its superclass:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;class &#39;__main__.Spoon&#39;&gt;</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">Spoon</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">AbstractDish</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</li>
<li><p class="first">If a subclass redefines a method, then it replaces the former one. One says
that the subclass <strong>overloads</strong> the method. One can nevertheless explicitly
call the hidden superclass method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">s</span><span class="o">.</span><span class="n">__repr__</span><span class="p">()</span>
<span class="go">&#39;A clean spoon&#39;</span>
<span class="gp">sage: </span><span class="n">Spoon</span><span class="o">.</span><span class="n">__repr__</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&#39;A clean spoon&#39;</span>
<span class="gp">sage: </span><span class="n">AbstractDish</span><span class="o">.</span><span class="n">__repr__</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&#39;An unspecified clean dish&#39;</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Advanced superclass method call</strong></p>
<p>Sometimes one wants to call an overloaded method without knowing in which
class it is defined. To do this, use the <tt class="docutils literal"><span class="pre">super</span></tt> operator:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="nb">super</span><span class="p">(</span><span class="n">Spoon</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">__repr__</span><span class="p">()</span>
<span class="go">&#39;An unspecified clean dish&#39;</span>
</pre></div>
</div>
<p>A very common usage of this construct is to call the <tt class="docutils literal"><span class="pre">__init__</span></tt> method of the
superclass:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">Spoon</span><span class="p">(</span><span class="n">AbstractDish</span><span class="p">):</span>
<span class="go">....:     def __init__(self):</span>
<span class="go">....:         print &quot;Building a spoon&quot;</span>
<span class="go">....:         super(Spoon, self).__init__()</span>
<span class="go">....:     def __repr__(self):</span>
<span class="go">....:         return &quot;A %s spoon&quot;%self.state()</span>
<span class="go">....:     def eat_with(self):</span>
<span class="go">....:         self._make_dirty()</span>
<span class="gp">sage: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Spoon</span><span class="p">()</span>
<span class="go">Building a spoon</span>
<span class="gp">sage: </span><span class="n">s</span>
<span class="go">A clean spoon</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id3">
<h3>Exercises<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Modify the class <tt class="docutils literal"><span class="pre">Glasses</span></tt> so that it inherits from <tt class="docutils literal"><span class="pre">Dish</span></tt>.</li>
<li>Write a class <tt class="docutils literal"><span class="pre">Plate</span></tt> whose instance can contain any meal together with
a class <tt class="docutils literal"><span class="pre">Fork</span></tt>. Avoid as much as possible code duplication (hint:
you can write a factorized class <tt class="docutils literal"><span class="pre">ContainerDish</span></tt>).</li>
<li>Test everything.</li>
</ol>
</div>
</div>
<div class="section" id="sage-specifics-about-classes">
<span id="sage-specifics"></span><h2>Sage specifics about classes<a class="headerlink" href="#sage-specifics-about-classes" title="Permalink to this headline">¶</a></h2>
<p>Compared to Python, Sage has particular ways to handle objects:</p>
<ul class="simple">
<li>Any classes for mathematical objects in Sage should inherit from
<a class="reference external" href="../reference/structure/sage/structure/sage_object.html#sage.structure.sage_object.SageObject" title="(in Sage Reference Manual: Basic Structures v6.10)"><tt class="xref py py-class docutils literal"><span class="pre">SageObject</span></tt></a> rather than from <tt class="docutils literal"><span class="pre">object</span></tt>. Most of the time, they
actually inherit from a subclass such as <a class="reference external" href="../reference/structure/sage/structure/parent.html#sage.structure.parent.Parent" title="(in Sage Reference Manual: Basic Structures v6.10)"><tt class="xref py py-class docutils literal"><span class="pre">Parent</span></tt></a> or
<tt class="xref py py-class docutils literal"><span class="pre">Element</span></tt>.</li>
<li>Printing should be done through <tt class="docutils literal"><span class="pre">_repr_</span></tt> instead of <tt class="docutils literal"><span class="pre">__repr__</span></tt> to allow
for renaming.</li>
<li>More generally, Sage-specific special methods are usually named <tt class="docutils literal"><span class="pre">_meth_</span></tt>
rather than <tt class="docutils literal"><span class="pre">__meth__</span></tt>. For example, lots of classes implement <tt class="docutils literal"><span class="pre">_hash_</span></tt>
which is used and cached by <tt class="docutils literal"><span class="pre">__hash__</span></tt>. In the same vein, elements of a
group usually implement <tt class="docutils literal"><span class="pre">_mul_</span></tt>, so that there is no need to take care
about coercions as they are done in <tt class="docutils literal"><span class="pre">__mul__</span></tt>.</li>
</ul>
<p>For more details, see the Sage Developer&#8217;s Guide.</p>
</div>
<div class="section" id="solutions-to-the-exercises">
<span id="solutions"></span><h2>Solutions to the exercises<a class="headerlink" href="#solutions-to-the-exercises" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Here is a solution to the first exercise:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">Glass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="go">....:     def __init__(self, size):</span>
<span class="go">....:         assert size &gt; 0</span>
<span class="go">....:         self._size = float(size)</span>
<span class="go">....:         self.wash()</span>
<span class="go">....:     def __repr__(self):</span>
<span class="go">....:         if self._content == 0.0:</span>
<span class="go">....:             return &quot;An empty glass of size %s&quot;%(self._size)</span>
<span class="go">....:         else:</span>
<span class="go">....:             return &quot;A glass of size %s cl containing %s cl of %s&quot;%(</span>
<span class="go">....:                     self._size, self._content, self._beverage)</span>
<span class="go">....:     def content(self):</span>
<span class="go">....:         return self._content</span>
<span class="go">....:     def beverage(self):</span>
<span class="go">....:         return self._beverage</span>
<span class="go">....:     def fill(self, beverage = &quot;water&quot;):</span>
<span class="go">....:         if not self.is_clean():</span>
<span class="go">....:             raise ValueError(&quot;Don&#39;t want to fill a dirty glass&quot;)</span>
<span class="go">....:         self._clean = False</span>
<span class="go">....:         self._content = self._size</span>
<span class="go">....:         self._beverage = beverage</span>
<span class="go">....:     def empty(self):</span>
<span class="go">....:         self._content = float(0.0)</span>
<span class="go">....:     def is_empty(self):</span>
<span class="go">....:         return self._content == 0.0</span>
<span class="go">....:     def drink(self, amount):</span>
<span class="go">....:         if amount &lt;= 0.0:</span>
<span class="go">....:             raise ValueError(&quot;amount must be positive&quot;)</span>
<span class="go">....:         elif amount &gt; self._content:</span>
<span class="go">....:             raise ValueError(&quot;not enough beverage in the glass&quot;)</span>
<span class="go">....:         else:</span>
<span class="go">....:             self._content -= float(amount)</span>
<span class="go">....:     def is_clean(self):</span>
<span class="go">....:         return self._clean</span>
<span class="go">....:     def wash(self):</span>
<span class="go">....:         self._content = float(0.0)</span>
<span class="go">....:         self._beverage = None</span>
<span class="go">....:         self._clean = True</span>
</pre></div>
</div>
</li>
<li><p class="first">Let&#8217;s check that everything is working as expected:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">Glass</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">An empty glass of size 10.0</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">drink</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">not enough beverage in the glass</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s">&quot;beer&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">A glass of size 10.0 cl containing 10.0 cl of beer</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_clean</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">drink</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">A glass of size 10.0 cl containing 5.0 cl of beer</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_clean</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">drink</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">An empty glass of size 10.0</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_clean</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s">&quot;orange juice&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Don&#39;t want to fill a dirty glass</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">wash</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">An empty glass of size 10.0</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s">&quot;orange juice&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">A glass of size 10.0 cl containing 10.0 cl of orange juice</span>
</pre></div>
</div>
</li>
<li><p class="first">Here is the solution to the second exercice:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">AbstractDish</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="go">....:     def __init__(self):</span>
<span class="go">....:         self._clean = True</span>
<span class="go">....:     def is_clean(self):</span>
<span class="go">....:         return self._clean</span>
<span class="go">....:     def state(self):</span>
<span class="go">....:         return &quot;clean&quot; if self.is_clean() else &quot;dirty&quot;</span>
<span class="go">....:     def __repr__(self):</span>
<span class="go">....:         return &quot;An unspecified %s dish&quot;%self.state()</span>
<span class="go">....:     def _make_dirty(self):</span>
<span class="go">....:         self._clean = False</span>
<span class="go">....:     def wash(self):</span>
<span class="go">....:         self._clean = True</span>


<span class="gp">sage: </span><span class="k">class</span> <span class="nc">ContainerDish</span><span class="p">(</span><span class="n">AbstractDish</span><span class="p">):</span>
<span class="go">....:     def __init__(self, size):</span>
<span class="go">....:         assert size &gt; 0</span>
<span class="go">....:         self._size = float(size)</span>
<span class="go">....:         self._content = float(0)</span>
<span class="go">....:         super(ContainerDish, self).__init__()</span>
<span class="go">....:     def content(self):</span>
<span class="go">....:         return self._content</span>
<span class="go">....:     def empty(self):</span>
<span class="go">....:         self._content = float(0.0)</span>
<span class="go">....:     def is_empty(self):</span>
<span class="go">....:         return self._content == 0.0</span>
<span class="go">....:     def wash(self):</span>
<span class="go">....:         self._content = float(0.0)</span>
<span class="go">....:         super(ContainerDish, self).wash()</span>


<span class="gp">sage: </span><span class="k">class</span> <span class="nc">Glass</span><span class="p">(</span><span class="n">ContainerDish</span><span class="p">):</span>
<span class="go">....:     def __repr__(self):</span>
<span class="go">....:         if self._content == 0.0:</span>
<span class="go">....:             return &quot;An empty glass of size %s&quot;%(self._size)</span>
<span class="go">....:         else:</span>
<span class="go">....:             return &quot;A glass of size %s cl containing %s cl of %s&quot;%(</span>
<span class="go">....:                     self._size, self._content, self._beverage)</span>
<span class="go">....:     def beverage(self):</span>
<span class="go">....:         return self._beverage</span>
<span class="go">....:     def fill(self, beverage = &quot;water&quot;):</span>
<span class="go">....:         if not self.is_clean():</span>
<span class="go">....:             raise ValueError(&quot;Don&#39;t want to fill a dirty glass&quot;)</span>
<span class="go">....:         self._make_dirty()</span>
<span class="go">....:         self._content = self._size</span>
<span class="go">....:         self._beverage = beverage</span>
<span class="go">....:     def drink(self, amount):</span>
<span class="go">....:         if amount &lt;= 0.0:</span>
<span class="go">....:             raise ValueError(&quot;amount must be positive&quot;)</span>
<span class="go">....:         elif amount &gt; self._content:</span>
<span class="go">....:             raise ValueError(&quot;not enough beverage in the glass&quot;)</span>
<span class="go">....:         else:</span>
<span class="go">....:             self._content -= float(amount)</span>
<span class="go">....:     def wash(self):</span>
<span class="go">....:         self._beverage = None</span>
<span class="go">....:         super(Glass, self).wash()</span>
</pre></div>
</div>
</li>
<li><p class="first">Let&#8217;s check that everything is working as expected:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">G</span> <span class="o">=</span> <span class="n">Glass</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">An empty glass of size 10.0</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">drink</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">not enough beverage in the glass</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s">&quot;beer&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">A glass of size 10.0 cl containing 10.0 cl of beer</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_clean</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">drink</span><span class="p">(</span><span class="mf">5.0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">A glass of size 10.0 cl containing 5.0 cl of beer</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_empty</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_clean</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">drink</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">An empty glass of size 10.0</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">is_clean</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s">&quot;orange juice&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Don&#39;t want to fill a dirty glass</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">wash</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">An empty glass of size 10.0</span>
<span class="gp">sage: </span><span class="n">G</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="s">&quot;orange juice&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">G</span>
<span class="go">A glass of size 10.0 cl containing 10.0 cl of orange juice</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">give the example of the class <tt class="docutils literal"><span class="pre">Plate</span></tt>.</p>
</div>
<p>That all folks !</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Tutorial: Objects and Classes in Python and Sage</a><ul>
<li><a class="reference internal" href="#foreword-variables-names-and-objects">Foreword: variables, names and objects</a></li>
<li><a class="reference internal" href="#other-languages-have-variables">Other languages have &#8220;variables&#8221;</a></li>
<li><a class="reference internal" href="#python-has-names">Python has &#8220;names&#8221;</a></li>
<li><a class="reference internal" href="#object-oriented-programming-paradigm">Object-oriented programming paradigm</a><ul>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#an-example-glass-of-beverage-in-a-restaurant">An example: glass of beverage in a restaurant</a></li>
<li><a class="reference internal" href="#exercises">Exercises</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inheritance">Inheritance</a><ul>
<li><a class="reference internal" href="#id2">Summary</a></li>
<li><a class="reference internal" href="#id3">Exercises</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sage-specifics-about-classes">Sage specifics about classes</a></li>
<li><a class="reference internal" href="#solutions-to-the-exercises">Solutions to the exercises</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="tutorial-comprehensions.html"
                                  title="previous chapter">Tutorial: Comprehensions, Iterators, and Iterables</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="functional_programming.html"
                                  title="next chapter">Functional Programming for Mathematicians</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/tutorial-objects-and-classes.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <!-- The shading of the "Go" button should be consistent -->
                <!-- with the colour of the header and footer. See the file -->
                <!-- doc/common/themes/sage/theme.conf for colours used by -->
                <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="functional_programming.html" title="Functional Programming for Mathematicians"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial-comprehensions.html" title="Tutorial: Comprehensions, Iterators, and Iterables"
             >previous</a> |</li>
  
    
      <a href="../index.html"><img src="_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="index.html">Thematic Tutorials v6.10</a> &raquo;</li>

          <li><a href="toctree.html" >Thematic tutorial document tree</a> &raquo;</li> 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2015, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>