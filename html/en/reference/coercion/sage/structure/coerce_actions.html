<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Coerce actions &mdash; Sage Reference Manual v6.7: Coercion</title>
    
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Sage Reference Manual v6.7: Coercion" href="../../index.html" />
    <link rel="next" title="Coerce maps" href="coerce_maps.html" />
    <link rel="prev" title="The Coercion Model" href="coerce.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="coerce_maps.html" title="Coerce maps"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="coerce.html" title="The Coercion Model"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Coercion</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="coerce-actions">
<span id="sage-structure-coerce-actions"></span><h1>Coerce actions<a class="headerlink" href="#coerce-actions" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.structure.coerce_actions"></span><dl class="class">
<dt id="sage.structure.coerce_actions.ActOnAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">ActOnAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.ActOnAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.coerce_actions.GenericAction" title="sage.structure.coerce_actions.GenericAction"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.coerce_actions.GenericAction</span></tt></a></p>
<p>Class for actions defined via the _act_on_ method.</p>
</dd></dl>

<dl class="class">
<dt id="sage.structure.coerce_actions.ActedUponAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">ActedUponAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.ActedUponAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.coerce_actions.GenericAction" title="sage.structure.coerce_actions.GenericAction"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.coerce_actions.GenericAction</span></tt></a></p>
<p>Class for actions defined via the _acted_upon_ method.</p>
</dd></dl>

<dl class="class">
<dt id="sage.structure.coerce_actions.GenericAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">GenericAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.GenericAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../categories/sage/categories/action.html#sage.categories.action.Action" title="(in Sage Reference Manual: Category Theory v6.7)"><tt class="xref py py-class docutils literal"><span class="pre">sage.categories.action.Action</span></tt></a></p>
<p>TESTS:</p>
<p>Note that coerce actions should only be used inside of the coercion
model. For this test, we need to strongly reference the domains,
for otherwise they could be garbage collected, giving rise to
random errors (see <a class="reference external" href="http://trac.sagemath.org/18157">trac ticket #18157</a>).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">coerce_actions</span><span class="o">.</span><span class="n">ActedUponAction</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">Cusps</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="go">Left action by Full MatrixSpace of 2 by 2 dense matrices over Integer Ring on Set P^1(QQ) of all cusps</span>

<span class="gp">sage: </span><span class="n">Z6</span> <span class="o">=</span> <span class="n">Zmod</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">sage</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">coerce_actions</span><span class="o">.</span><span class="n">GenericAction</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="n">Z6</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">NotImplementedError</span>: <span class="n-Identifier">Action not implemented.</span>
</pre></div>
</div>
<p>This will break if we tried to use it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">sage</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">coerce_actions</span><span class="o">.</span><span class="n">GenericAction</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="n">Z6</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">Left action by Rational Field on Ring of integers modulo 6</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.structure.coerce_actions.GenericAction.codomain">
<tt class="descname">codomain</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.structure.coerce_actions.GenericAction.codomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the &#8220;codomain&#8221; of this action, i.e. the Parent in which the
result elements live. Typically, this should be the same as the
acted upon set.</p>
<p>EXAMPLES:</p>
<p>Note that coerce actions should only be used inside of the coercion
model. For this test, we need to strongly reference the domains, for
otherwise they could be garbage collected, giving rise to random
errors (see <a class="reference external" href="http://trac.sagemath.org/18157">trac ticket #18157</a>).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">coerce_actions</span><span class="o">.</span><span class="n">ActedUponAction</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">Cusps</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">codomain</span><span class="p">()</span>
<span class="go">Set P^1(QQ) of all cusps</span>

<span class="gp">sage: </span><span class="n">S3</span> <span class="o">=</span> <span class="n">SymmetricGroup</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">QQxyz</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[</span><span class="s">&#39;x,y,z&#39;</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">coerce_actions</span><span class="o">.</span><span class="n">ActOnAction</span><span class="p">(</span><span class="n">S3</span><span class="p">,</span> <span class="n">QQxyz</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">codomain</span><span class="p">()</span>
<span class="go">Multivariate Polynomial Ring in x, y, z over Rational Field</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.structure.coerce_actions.IntegerMulAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">IntegerMulAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.IntegerMulAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../categories/sage/categories/action.html#sage.categories.action.Action" title="(in Sage Reference Manual: Category Theory v6.7)"><tt class="xref py py-class docutils literal"><span class="pre">sage.categories.action.Action</span></tt></a></p>
<p>This class implements the action <span class="math">\(n \cdot a = a + a + \cdots + a\)</span> via
repeated doubling.</p>
<p>Both addition and negation must be defined on the set <span class="math">\(M\)</span>.</p>
<p>NOTE:</p>
<p>This class is used internally in Sage&#8217;s coercion model. Outside of the
coercion model, special precautions are needed to prevent domains of
the action from being garbage collected.</p>
<p>INPUT:</p>
<ul class="simple">
<li>An integer ring, <tt class="docutils literal"><span class="pre">ZZ</span></tt></li>
<li>A <tt class="docutils literal"><span class="pre">ZZ</span></tt> module <tt class="docutils literal"><span class="pre">M</span></tt></li>
<li>Optional: An element <tt class="docutils literal"><span class="pre">m</span></tt> of <tt class="docutils literal"><span class="pre">M</span></tt></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_actions</span> <span class="kn">import</span> <span class="n">IntegerMulAction</span>
<span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">x</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">act</span> <span class="o">=</span> <span class="n">IntegerMulAction</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="n">R</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">act</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="go">5*x</span>
<span class="gp">sage: </span><span class="n">act</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">sage: </span><span class="n">act</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="go">-3*x + 3</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="sage.structure.coerce_actions.LAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">LAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.LAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../categories/sage/categories/action.html#sage.categories.action.Action" title="(in Sage Reference Manual: Category Theory v6.7)"><tt class="xref py py-class docutils literal"><span class="pre">sage.categories.action.Action</span></tt></a></p>
<p>Action calls _l_action of the actor.</p>
</dd></dl>

<dl class="class">
<dt id="sage.structure.coerce_actions.LeftModuleAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">LeftModuleAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.LeftModuleAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.coerce_actions.ModuleAction" title="sage.structure.coerce_actions.ModuleAction"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.coerce_actions.ModuleAction</span></tt></a></p>
</dd></dl>

<dl class="class">
<dt id="sage.structure.coerce_actions.ModuleAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">ModuleAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.ModuleAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../categories/sage/categories/action.html#sage.categories.action.Action" title="(in Sage Reference Manual: Category Theory v6.7)"><tt class="xref py py-class docutils literal"><span class="pre">sage.categories.action.Action</span></tt></a></p>
<p>Module action.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">This is an abstract class, one must actually instantiate a
<a class="reference internal" href="#sage.structure.coerce_actions.LeftModuleAction" title="sage.structure.coerce_actions.LeftModuleAction"><tt class="xref py py-class docutils literal"><span class="pre">LeftModuleAction</span></tt></a> or a <a class="reference internal" href="#sage.structure.coerce_actions.RightModuleAction" title="sage.structure.coerce_actions.RightModuleAction"><tt class="xref py py-class docutils literal"><span class="pre">RightModuleAction</span></tt></a>.</p>
</div>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">G</span></tt> &#8211; the actor, an instance of <a class="reference external" href="../../../structure/sage/structure/parent.html#sage.structure.parent.Parent" title="(in Sage Reference Manual: Basic Structures v6.7)"><tt class="xref py py-class docutils literal"><span class="pre">Parent</span></tt></a>.</li>
<li><tt class="docutils literal"><span class="pre">S</span></tt> &#8211; the object that is acted upon.</li>
<li><tt class="docutils literal"><span class="pre">g</span></tt> &#8211; optional, an element of <tt class="docutils literal"><span class="pre">G</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">a</span></tt> &#8211; optional, an element of <tt class="docutils literal"><span class="pre">S</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">check</span></tt> &#8211; if True (default), then there will be no consistency tests
performed on sample elements.</li>
</ul>
<p>NOTE:</p>
<p>By default, the sample elements of <tt class="docutils literal"><span class="pre">S</span></tt> and <tt class="docutils literal"><span class="pre">G</span></tt> are obtained from
<a class="reference external" href="../../../structure/sage/structure/parent.html#sage.structure.parent.Parent.an_element" title="(in Sage Reference Manual: Basic Structures v6.7)"><tt class="xref py py-meth docutils literal"><span class="pre">an_element()</span></tt></a>, which relies on the
implementation of an <tt class="docutils literal"><span class="pre">_an_element_()</span></tt> method. This is not always
awailable. But usually, the action is only needed when one already
<em>has</em> two elements. Hence, by <a class="reference external" href="http://trac.sagemath.org/14249">trac ticket #14249</a>, the coercion model will
pass these two elements the the <a class="reference internal" href="#sage.structure.coerce_actions.ModuleAction" title="sage.structure.coerce_actions.ModuleAction"><tt class="xref py py-class docutils literal"><span class="pre">ModuleAction</span></tt></a> constructor.</p>
<p>The actual action is implemented by the <tt class="docutils literal"><span class="pre">_rmul_</span></tt> or <tt class="docutils literal"><span class="pre">_lmul_</span></tt>
function on its elements. We must, however, be very particular about
what we feed into these functions, because they operate under the
assumption that the inputs lie exactly in the base ring and may
segfault otherwise. Thus we handle all possible base extensions
manually here.</p>
<dl class="method">
<dt id="sage.structure.coerce_actions.ModuleAction.codomain">
<tt class="descname">codomain</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.structure.coerce_actions.ModuleAction.codomain" title="Permalink to this definition">¶</a></dt>
<dd><p>The codomain of self, which may or may not be equal to the domain.</p>
<p>EXAMPLES:</p>
<p>Note that coerce actions should only be used inside of the coercion
model. For this test, we need to strongly reference the domains,
for otherwise they could be garbage collected, giving rise to
random errors (see <a class="reference external" href="http://trac.sagemath.org/18157">trac ticket #18157</a>).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_actions</span> <span class="kn">import</span> <span class="n">LeftModuleAction</span>
<span class="gp">sage: </span><span class="n">ZZxyz</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[</span><span class="s">&#39;x,y,z&#39;</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">LeftModuleAction</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="n">ZZxyz</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">codomain</span><span class="p">()</span>
<span class="go">Multivariate Polynomial Ring in x, y, z over Rational Field</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.coerce_actions.ModuleAction.domain">
<tt class="descname">domain</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.structure.coerce_actions.ModuleAction.domain" title="Permalink to this definition">¶</a></dt>
<dd><p>The domain of self, which is the module that is being acted on.</p>
<p>EXAMPLES:</p>
<p>Note that coerce actions should only be used inside of the coercion
model. For this test, we need to strongly reference the domains,
for otherwise they could be garbage collected, giving rise to
random errors (see <a class="reference external" href="http://trac.sagemath.org/18157">trac ticket #18157</a>).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_actions</span> <span class="kn">import</span> <span class="n">LeftModuleAction</span>
<span class="gp">sage: </span><span class="n">ZZxyz</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[</span><span class="s">&#39;x,y,z&#39;</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">LeftModuleAction</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="n">ZZxyz</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">domain</span><span class="p">()</span>
<span class="go">Multivariate Polynomial Ring in x, y, z over Integer Ring</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.structure.coerce_actions.PyScalarAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">PyScalarAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.PyScalarAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../categories/sage/categories/action.html#sage.categories.action.Action" title="(in Sage Reference Manual: Category Theory v6.7)"><tt class="xref py py-class docutils literal"><span class="pre">sage.categories.action.Action</span></tt></a></p>
</dd></dl>

<dl class="class">
<dt id="sage.structure.coerce_actions.RAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">RAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.RAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../categories/sage/categories/action.html#sage.categories.action.Action" title="(in Sage Reference Manual: Category Theory v6.7)"><tt class="xref py py-class docutils literal"><span class="pre">sage.categories.action.Action</span></tt></a></p>
<p>Action calls _r_action of the actor.</p>
</dd></dl>

<dl class="class">
<dt id="sage.structure.coerce_actions.RightModuleAction">
<em class="property">class </em><tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">RightModuleAction</tt><a class="headerlink" href="#sage.structure.coerce_actions.RightModuleAction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.structure.coerce_actions.ModuleAction" title="sage.structure.coerce_actions.ModuleAction"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.coerce_actions.ModuleAction</span></tt></a></p>
<dl class="attribute">
<dt id="sage.structure.coerce_actions.RightModuleAction.is_inplace">
<tt class="descname">is_inplace</tt><a class="headerlink" href="#sage.structure.coerce_actions.RightModuleAction.is_inplace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="sage.structure.coerce_actions.detect_element_action">
<tt class="descclassname">sage.structure.coerce_actions.</tt><tt class="descname">detect_element_action</tt><big>(</big><em>X</em>, <em>Y</em>, <em>X_on_left</em>, <em>X_el=None</em>, <em>Y_el=None</em><big>)</big><a class="headerlink" href="#sage.structure.coerce_actions.detect_element_action" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an action of X on Y or Y on X as defined by elements X, if any.</p>
<p>EXAMPLES:</p>
<p>Note that coerce actions should only be used inside of the coercion
model. For this test, we need to strongly reference the domains,
for otherwise they could be garbage collected, giving rise to
random errors (see <a class="reference external" href="http://trac.sagemath.org/18157">trac ticket #18157</a>).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.coerce_actions</span> <span class="kn">import</span> <span class="n">detect_element_action</span>
<span class="gp">sage: </span><span class="n">ZZx</span> <span class="o">=</span> <span class="n">ZZ</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">M</span> <span class="o">=</span> <span class="n">MatrixSpace</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">detect_element_action</span><span class="p">(</span><span class="n">ZZx</span><span class="p">,</span> <span class="n">ZZ</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="go">Left scalar multiplication by Integer Ring on Univariate Polynomial Ring in x over Integer Ring</span>
<span class="gp">sage: </span><span class="n">detect_element_action</span><span class="p">(</span><span class="n">ZZx</span><span class="p">,</span> <span class="n">QQ</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="go">Right scalar multiplication by Rational Field on Univariate Polynomial Ring in x over Integer Ring</span>
<span class="gp">sage: </span><span class="n">detect_element_action</span><span class="p">(</span><span class="n">Cusps</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="go">Left action by Full MatrixSpace of 2 by 2 dense matrices over Integer Ring on Set P^1(QQ) of all cusps</span>
<span class="gp">sage: </span><span class="n">detect_element_action</span><span class="p">(</span><span class="n">Cusps</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="go">(None,)</span>
<span class="gp">sage: </span><span class="n">detect_element_action</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="n">QQ</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="go">(None,)</span>
</pre></div>
</div>
<p>TESTS:</p>
<p>This test checks that the issue in <a class="reference external" href="http://trac.sagemath.org/7718">trac ticket #7718</a> has been fixed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="k">class</span> <span class="nc">MyParent</span><span class="p">(</span><span class="n">Parent</span><span class="p">):</span>
<span class="go">....:     def an_element(self):</span>
<span class="go">....:         pass</span>
<span class="go">....:</span>
<span class="gp">sage: </span><span class="n">A</span> <span class="o">=</span> <span class="n">MyParent</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">detect_element_action</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">ZZ</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">RuntimeError</span>: <span class="n-Identifier">an_element() for &lt;class &#39;__main__.MyParent&#39;&gt; returned None</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href="coerce.html"
                                  title="previous chapter">The Coercion Model</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="coerce_maps.html"
                                  title="next chapter">Coerce maps</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/sage/structure/coerce_actions.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" size="18" />
               <!-- The shading of the "Go" button should be consistent -->
               <!-- with the colour of the header and footer. See the file -->
               <!-- doc/common/themes/sage/theme.conf for colours used by -->
               <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="coerce_maps.html" title="Coerce maps"
             >next</a> |</li>
        <li class="right" >
          <a href="coerce.html" title="The Coercion Model"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Coercion</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2015, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>