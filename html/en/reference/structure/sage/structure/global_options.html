<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Global options &mdash; Sage Reference Manual v7.1: Basic Structures</title>
    
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '7.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Sage Reference Manual v7.1: Basic Structures" href="../../index.html" />
    <link rel="next" title="Base class for old-style parent objects" href="parent_old.html" />
    <link rel="prev" title="Precision management for non-exact objects" href="nonexact.html" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="parent_old.html" title="Base class for old-style parent objects"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="nonexact.html" title="Precision management for non-exact objects"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Basic Structures</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="global-options">
<span id="sage-structure-global-options"></span><h1>Global options<a class="headerlink" href="#global-options" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.structure.global_options"></span><p>The <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> class provides a generic mechanism for
setting and accessing <strong>global</strong> options for parents in one or several
related classes, typically for customizing the representation of their
elements. This class will eventually also support setting options on a
parent by parent basis.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">For better examples of <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> in action see
<tt class="xref py py-meth docutils literal"><span class="pre">sage.combinat.partition.Partitions.global_options()</span></tt> and
<tt class="xref py py-meth docutils literal"><span class="pre">sage.combinat.tableau.Tableaux.global_options()</span></tt>.</p>
</div>
<div class="section" id="construction-of-options-classes">
<span id="construction-section"></span><h2>Construction of options classes<a class="headerlink" href="#construction-of-options-classes" title="Permalink to this headline">¶</a></h2>
<p>The general setup for creating a set of global options is:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">MyOptions</span><span class="o">=</span><span class="n">GlobalOptions</span><span class="p">(</span><span class="s1">&#39;option name&#39;</span><span class="p">,</span>
    <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Nice options&#39;</span><span class="p">,</span>
    <span class="n">first_option</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;default value&#39;</span><span class="p">,</span>
                      <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Changes the functionality of _repr_&#39;</span><span class="p">,</span>
                      <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">with_bells</span><span class="o">=</span><span class="s1">&#39;causes _repr_ to print with bells&#39;</span><span class="p">,</span>
                                  <span class="n">with_whistles</span><span class="o">=</span><span class="s1">&#39;causes _repr_ to print with whistles&#39;</span><span class="p">,</span>
                                  <span class="o">...</span><span class="p">),</span>
                      <span class="n">aliases</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">bells</span><span class="o">=</span><span class="s1">&#39;option1&#39;</span><span class="p">,</span> <span class="n">whistles</span><span class="o">=</span><span class="s1">&#39;option2&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">),</span>
    <span class="n">second_option</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="n">third_option</span><span class="o">=</span><span class="nb">dict</span><span class="p">(),</span>
    <span class="n">end_doc</span><span class="o">=</span><span class="s1">&#39;end of options documentation&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Each option is specified as a dictionary which describes the possible
values for the option and its documentation. The possible entries in this
dictionary are:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">alias</span></tt> &#8211; Allows for several option values to do the same thing.</li>
<li><tt class="docutils literal"><span class="pre">alt_name</span></tt> &#8211; An alternative name for this option.</li>
<li><tt class="docutils literal"><span class="pre">checker</span></tt> &#8211; A validation function which returns whether a user
supplied value is valid or not. This is typically useful for large
lists of legal values such as <span class="math">\(\NN\)</span>.</li>
<li><tt class="docutils literal"><span class="pre">default</span></tt> &#8211; Gives the default value for the option.</li>
<li><tt class="docutils literal"><span class="pre">description</span></tt> &#8211; A one line description of the option.</li>
<li><tt class="docutils literal"><span class="pre">link_to</span></tt> &#8211; Links this option to another one in another set of
global options. This is used for example to allow
<a class="reference external" href="../../../combinat/sage/combinat/partition.html#sage.combinat.partition.Partitions" title="(in Sage Reference Manual: Combinatorics v7.1)"><tt class="xref py py-class docutils literal"><span class="pre">Partitions</span></tt></a> and <a class="reference external" href="../../../combinat/sage/combinat/tableau.html#sage.combinat.tableau.Tableaux" title="(in Sage Reference Manual: Combinatorics v7.1)"><tt class="xref py py-class docutils literal"><span class="pre">Tableaux</span></tt></a> to share the same
<tt class="docutils literal"><span class="pre">convention</span></tt> option.</li>
<li><tt class="docutils literal"><span class="pre">setter</span></tt> &#8211; A function which is called <strong>after</strong> the value of the
option is changed.</li>
<li><tt class="docutils literal"><span class="pre">values</span></tt> &#8211; A dictionary assigning each valid value for the option
to a short description of what it does.</li>
<li><tt class="docutils literal"><span class="pre">case_sensitive</span></tt> &#8211; (Default: <tt class="docutils literal"><span class="pre">True</span></tt>) <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt> depending on
whether the values of the option are case sensitive.</li>
</ul>
<p>For each option, either a complete list of possible values, via <tt class="docutils literal"><span class="pre">values</span></tt>, or a
validation function, via <tt class="docutils literal"><span class="pre">checker</span></tt>, must be given. The values can be quite
arbitrary, including user-defined functions which customize the default
behaviour of the classes such as the output of <tt class="docutils literal"><span class="pre">_repr_</span></tt> or <a class="reference external" href="../../../misc/sage/misc/latex.html#sage.misc.latex.latex" title="(in Sage Reference Manual: Utilities v7.1)"><tt class="xref py py-func docutils literal"><span class="pre">latex()</span></tt></a>. See
<a class="reference internal" href="#dispatcher"><em>Dispatchers</em></a> below, and <tt class="xref py py-meth docutils literal"><span class="pre">dispatcher()</span></tt>, for more
information.</p>
<p>The documentation for the options is automatically constructed by combining the
description of each option with a header and footer which are given by the
following optional, but recommended, arguments:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">doc</span></tt> &#8211; The top half of the documentation which appears before the
automatically generated list of options and their possible values.</li>
<li><tt class="docutils literal"><span class="pre">end_doc</span></tt> &#8211; The second half of the documentation which appears
after the list of options and their values.</li>
</ul>
<p>The basic structure for defining a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> class is best
illustrated by an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="o">=</span><span class="n">GlobalOptions</span><span class="p">(</span><span class="s1">&#39;menu&#39;</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Fancy documentation</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">19</span><span class="p">,</span> <span class="n">end_doc</span><span class="o">=</span><span class="s1">&#39;The END!&#39;</span><span class="p">,</span>
<span class="gp">... </span>      <span class="n">entree</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;soup&#39;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">description</span><span class="o">=</span><span class="s1">&#39;The first course of a meal&#39;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">soup</span><span class="o">=</span><span class="s1">&#39;soup of the day&#39;</span><span class="p">,</span> <span class="n">bread</span><span class="o">=</span><span class="s1">&#39;oven baked&#39;</span><span class="p">),</span>
<span class="gp">... </span>                  <span class="n">alias</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">rye</span><span class="o">=</span><span class="s1">&#39;bread&#39;</span><span class="p">)),</span>
<span class="gp">... </span>      <span class="n">appetizer</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alt_name</span><span class="o">=</span><span class="s1">&#39;entree&#39;</span><span class="p">),</span>
<span class="gp">... </span>      <span class="n">main</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;pizza&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Main meal&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">pizza</span><span class="o">=</span><span class="s1">&#39;thick crust&#39;</span><span class="p">,</span> <span class="n">pasta</span><span class="o">=</span><span class="s1">&#39;penne arrabiata&#39;</span><span class="p">),</span>
<span class="gp">... </span>                <span class="n">case_sensitive</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>      <span class="n">dessert</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;espresso&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Dessert&#39;</span><span class="p">,</span>
<span class="gp">... </span>                   <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">espresso</span><span class="o">=</span><span class="s1">&#39;life begins again&#39;</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">cake</span><span class="o">=</span><span class="s1">&#39;waist begins again&#39;</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">cream</span><span class="o">=</span><span class="s1">&#39;fluffy, white stuff&#39;</span><span class="p">)),</span>
<span class="gp">... </span>      <span class="n">tip</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Reward for good service&#39;</span><span class="p">,</span>
<span class="gp">... </span>      <span class="n">checker</span><span class="o">=</span><span class="k">lambda</span> <span class="n">tip</span><span class="p">:</span> <span class="n">tip</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>
<span class="gp">... </span>  <span class="p">)</span>
<span class="gp">sage: </span><span class="n">menu</span>
<span class="go">options for menu</span>
</pre></div>
</div>
<p>For more details see <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a>.</p>
</div>
<div class="section" id="accessing-and-setting-option-values">
<h2>Accessing and setting option values<a class="headerlink" href="#accessing-and-setting-option-values" title="Permalink to this headline">¶</a></h2>
<p>All options and their values, when they are strings, are forced to be lower
case. The values of an options class can be set and accessed by calling the
class or by treating the class as an array.</p>
<p>Continuing the example from <a class="reference internal" href="#construction-section"><em>Construction of options classes</em></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">menu</span><span class="p">()</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: espresso</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     10</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="s1">&#39;dessert&#39;</span><span class="p">)</span>
<span class="go">&#39;espresso&#39;</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">[</span><span class="s1">&#39;dessert&#39;</span><span class="p">]</span>
<span class="go">&#39;espresso&#39;</span>
</pre></div>
</div>
<p>Note that, provided there is no ambiguity, options and their values can be
abbreviated:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">menu</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">]</span>
<span class="go">&#39;espresso&#39;</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span><span class="s1">&#39;t&#39;</span><span class="p">,</span><span class="n">des</span><span class="o">=</span><span class="s1">&#39;esp&#39;</span><span class="p">,</span> <span class="n">ent</span><span class="o">=</span><span class="s1">&#39;sou&#39;</span><span class="p">)</span>  <span class="c1"># get and set several values at once</span>
<span class="go">[&#39;pizza&#39;, 10]</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">);</span> <span class="n">menu</span><span class="p">[</span><span class="s1">&#39;tip&#39;</span><span class="p">]</span>
<span class="go">15</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="n">e</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="s1">&#39;Pi&#39;</span><span class="p">);</span> <span class="n">menu</span><span class="p">()</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: espresso</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     15</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="s1">&#39;P&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">P is not a valid value for main in the options for menu</span>
</pre></div>
</div>
</div>
<div class="section" id="setter-functions">
<h2>Setter functions<a class="headerlink" href="#setter-functions" title="Permalink to this headline">¶</a></h2>
<p>Each option of a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> can be equipped with an optional setter
function which is called <strong>after</strong> the value of the option is changed. In the
following example, setting the option &#8216;add&#8217; changes the state of the class by
setting an attribute in this class using a <a class="reference external" href="https://docs.python.org/library/functions.html#classmethod" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">classmethod()</span></tt></a>. Note that the
options object is inserted after the creation of the class in order to access
the <a class="reference external" href="https://docs.python.org/library/functions.html#classmethod" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">classmethod()</span></tt></a> as <tt class="docutils literal"><span class="pre">A.setter</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">SageObject</span><span class="p">):</span>
<span class="gp">... </span>      <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">... </span>      <span class="nd">@classmethod</span>
<span class="gp">... </span>      <span class="k">def</span> <span class="nf">setter</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="gp">... </span>          <span class="n">cls</span><span class="o">.</span><span class="n">state</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">sage: </span><span class="n">A</span><span class="o">.</span><span class="n">options</span><span class="o">=</span><span class="n">GlobalOptions</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">add</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">checker</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">description</span><span class="o">=</span><span class="s1">&#39;An option with a setter&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">setter</span><span class="o">=</span><span class="n">A</span><span class="o">.</span><span class="n">setter</span><span class="p">))</span>
<span class="gp">sage: </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="n">a</span><span class="o">.</span><span class="n">state</span>
<span class="go">1</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">options</span><span class="p">()</span>
<span class="go">Current options for A</span>
<span class="go">- add: 1</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">add</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">state</span>
<span class="go">5</span>
<span class="gp">sage: </span><span class="n">a</span><span class="o">.</span><span class="n">options</span><span class="p">()</span>
<span class="go">Current options for A</span>
<span class="go">- add: 4</span>
</pre></div>
</div>
<p>Another alternative is to construct the options class inside the <tt class="docutils literal"><span class="pre">__init__</span></tt>
method of the class <tt class="docutils literal"><span class="pre">A</span></tt>.</p>
</div>
<div class="section" id="documentation-for-options">
<h2>Documentation for options<a class="headerlink" href="#documentation-for-options" title="Permalink to this headline">¶</a></h2>
<p>The documentation for a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> is automatically generated from
the supplied options. For example, the generated documentation for the options
<tt class="docutils literal"><span class="pre">menu</span></tt> defined in <a class="reference internal" href="#construction-section"><em>Construction of options classes</em></a> is the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Fancy documentation
-------------------

OPTIONS:

- ``appetizer`` -- alternative name for ``entree``

- ``dessert`` -- (default: ``espresso``)
  Dessert

  - ``cake``     -- waist begins again
  - ``cream``    -- fluffy, white stuff
  - ``espresso`` -- life begins again

- ``entree`` -- (default: ``soup``)
  The first course of a meal

  - ``bread`` -- oven baked
  - ``rye``   -- alias for bread
  - ``soup``  -- soup of the day

- ``main`` -- (default: ``pizza``)
  Main meal

  - ``pasta`` -- penne arrabiata
  - ``pizza`` -- thick crust

- tip -- (default: 10)
  Reward for good service

The END!

See :class:`~sage.structure.global_options.GlobalOptions` for more features of these options.
</pre></div>
</div>
<p>In addition, help on each option, and its list of possible values, can be
obtained by (trying to) set the option equal to &#8216;?&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="n">des</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">)</span>
<span class="go">- ``dessert`` -- (default: ``espresso``)</span>
<span class="go">  Dessert</span>

<span class="go">  - ``cake``     -- waist begins again</span>
<span class="go">  - ``cream``    -- fluffy, white stuff</span>
<span class="go">  - ``espresso`` -- life begins again</span>

<span class="go">Current value: espresso</span>
</pre></div>
</div>
</div>
<div class="section" id="dispatchers">
<span id="dispatcher"></span><h2>Dispatchers<a class="headerlink" href="#dispatchers" title="Permalink to this headline">¶</a></h2>
<p>The whole idea of a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> class is that the options change the
default behaviour of the associated classes. This can be done either by simply
checking what the current value of the relevant option is. Another possibility
is to use the options class as a dispatcher to associated methods. To use the
dispatcher feature of a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> class it is necessary to implement
separate methods for each value of the option where the naming convention for
these methods is that they start with a common prefix and finish with the value
of the option.</p>
<p>If the value of a dispatchable option is set equal to a (user defined) function
then this function is called instead of a class method.</p>
<p>For example, the options <tt class="docutils literal"><span class="pre">MyOptions</span></tt> can be used to dispatch the <tt class="docutils literal"><span class="pre">_repr_</span></tt>
method of the associated class <tt class="docutils literal"><span class="pre">MyClass</span></tt> as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="n">global_options</span><span class="o">=</span><span class="n">MyOptions</span>
    <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_options</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;_repr_&#39;</span><span class="p">,</span><span class="s1">&#39;first_option&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_repr_with_bells</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;Bell!&#39;</span>
    <span class="k">def</span> <span class="nf">_repr_with_whistles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;Whistles!&#39;</span>
</pre></div>
</div>
<p>In this example, <tt class="docutils literal"><span class="pre">first_option</span></tt> is an option of <tt class="docutils literal"><span class="pre">MyOptions</span></tt> which takes
values <tt class="docutils literal"><span class="pre">bells</span></tt>, <tt class="docutils literal"><span class="pre">whistles</span></tt>, and so on. Note that it is necessary to make
<tt class="docutils literal"><span class="pre">self</span></tt>, which is an instance of <tt class="docutils literal"><span class="pre">MyClass</span></tt>, an argument of the dispatcher
because <a class="reference internal" href="#sage.structure.global_options.GlobalOptions.dispatch" title="sage.structure.global_options.GlobalOptions.dispatch"><tt class="xref py py-meth docutils literal"><span class="pre">dispatch()</span></tt></a> is a method of <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a>
and not a method of <tt class="docutils literal"><span class="pre">MyClass</span></tt>. Apart from <tt class="docutils literal"><span class="pre">MyOptions</span></tt>, as it is a method of
this class, the arguments are the attached class (here <tt class="docutils literal"><span class="pre">MyClass</span></tt>), the prefix
of the method of <tt class="docutils literal"><span class="pre">MyClass</span></tt> being dispatched, the option of <tt class="docutils literal"><span class="pre">MyOptions</span></tt>
which controls the dispatching. All other arguments are passed through to the
corresponding methods of <tt class="docutils literal"><span class="pre">MyClass</span></tt>. In general, a dispatcher is invoked as:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dispatch_to</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Usually this will result in the method
<tt class="docutils literal"><span class="pre">dispatch_to</span> <span class="pre">+</span> <span class="pre">'_'</span> <span class="pre">+</span> <span class="pre">MyOptions(options)</span></tt> of <tt class="docutils literal"><span class="pre">self</span></tt> being called with
arguments <tt class="docutils literal"><span class="pre">*args</span></tt> and <tt class="docutils literal"><span class="pre">**kargs</span></tt> (if <tt class="docutils literal"><span class="pre">dispatch_to[-1]</span> <span class="pre">==</span> <span class="pre">'_'</span></tt> then the
method <tt class="docutils literal"><span class="pre">dispatch_to</span> <span class="pre">+</span> <span class="pre">MyOptions(options)</span></tt> is called).</p>
<p>If <tt class="docutils literal"><span class="pre">MyOptions(options)</span></tt> is itself a function then the dispatcher will call
this function instead. In this way, it is possible to allow the user to
customise the default behaviour of this method. See
<a class="reference internal" href="#sage.structure.global_options.GlobalOptions.dispatch" title="sage.structure.global_options.GlobalOptions.dispatch"><tt class="xref py py-meth docutils literal"><span class="pre">dispatch()</span></tt></a> for an example of how this can be achieved.</p>
<p>The dispatching capabilities of <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> allows options to be
applied automatically without needing to parse different values of the option
(the cost is that there must be a method for each value). The dispatching
capabilities can also be used to make one option control several methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_le_&#39;</span><span class="p">,</span><span class="s1">&#39;cmp&#39;</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_ge_&#39;</span><span class="p">,</span><span class="s1">&#39;cmp&#39;</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_le_option_a</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
<span class="k">def</span> <span class="nf">_ge_option_a</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
<span class="k">def</span> <span class="nf">_le_option_b</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
<span class="k">def</span> <span class="nf">_ge_option_b</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#sage.structure.global_options.GlobalOptions.dispatch" title="sage.structure.global_options.GlobalOptions.dispatch"><tt class="xref py py-meth docutils literal"><span class="pre">dispatch()</span></tt></a> for more details.</p>
</div>
<div class="section" id="doc-testing">
<h2>Doc testing<a class="headerlink" href="#doc-testing" title="Permalink to this headline">¶</a></h2>
<p>All of the options and their effects should be doc-tested. However, in order
not to break other tests, all options should be returned to their default state
at the end of each test. To make this easier, every <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> class has
a <a class="reference internal" href="#sage.structure.global_options.GlobalOptions.reset" title="sage.structure.global_options.GlobalOptions.reset"><tt class="xref py py-meth docutils literal"><span class="pre">reset()</span></tt></a> method for doing exactly this.</p>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p>TESTS:</p>
<p>As options classes to not know how they are created they cannot be
pickled:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">menu</span><span class="o">=</span><span class="n">GlobalOptions</span><span class="p">(</span><span class="s1">&#39;menu&#39;</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Fancy documentation</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">19</span><span class="p">,</span> <span class="n">end_doc</span><span class="o">=</span><span class="s1">&#39;The END!&#39;</span><span class="p">,</span>
<span class="gp">... </span>      <span class="n">entree</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;soup&#39;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">description</span><span class="o">=</span><span class="s1">&#39;The first course of a meal&#39;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">soup</span><span class="o">=</span><span class="s1">&#39;soup of the day&#39;</span><span class="p">,</span> <span class="n">bread</span><span class="o">=</span><span class="s1">&#39;oven baked&#39;</span><span class="p">),</span>
<span class="gp">... </span>                  <span class="n">alias</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">rye</span><span class="o">=</span><span class="s1">&#39;bread&#39;</span><span class="p">)),</span>
<span class="gp">... </span>      <span class="n">appetizer</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alt_name</span><span class="o">=</span><span class="s1">&#39;entree&#39;</span><span class="p">),</span>
<span class="gp">... </span>      <span class="n">main</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;pizza&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Main meal&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">pizza</span><span class="o">=</span><span class="s1">&#39;thick crust&#39;</span><span class="p">,</span> <span class="n">pasta</span><span class="o">=</span><span class="s1">&#39;penne arrabiata&#39;</span><span class="p">),</span>
<span class="gp">... </span>                <span class="n">case_sensitive</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>      <span class="n">dessert</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;espresso&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Dessert&#39;</span><span class="p">,</span>
<span class="gp">... </span>                   <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">espresso</span><span class="o">=</span><span class="s1">&#39;life begins again&#39;</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">cake</span><span class="o">=</span><span class="s1">&#39;waist begins again&#39;</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">cream</span><span class="o">=</span><span class="s1">&#39;fluffy, white stuff&#39;</span><span class="p">)),</span>
<span class="gp">... </span>      <span class="n">tip</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Reward for good service&#39;</span><span class="p">,</span>
<span class="gp">... </span>      <span class="n">checker</span><span class="o">=</span><span class="k">lambda</span> <span class="n">tip</span><span class="p">:</span> <span class="n">tip</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>
<span class="gp">... </span>  <span class="p">)</span>
<span class="gp">sage: </span><span class="n">TestSuite</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">skip</span><span class="o">=</span><span class="s1">&#39;_test_pickling&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Default values for <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> can be automatically overridden by
calling the individual instances of the <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> class inside
<tt class="docutils literal"><span class="pre">$HOME/.sage/init.sage</span></tt>. However, this needs to be disabled by developers
when they are writing or checking doc-tests. Another possibly would be to
<a class="reference internal" href="#sage.structure.global_options.GlobalOptions.reset" title="sage.structure.global_options.GlobalOptions.reset"><tt class="xref py py-meth docutils literal"><span class="pre">reset()</span></tt></a> all options before and after all doct-tests
which are dependent on particular values of options.</p>
</div>
<p>AUTHORS:</p>
<ul class="simple">
<li>Andrew Mathas (2013): initial version</li>
</ul>
<dl class="class">
<dt id="sage.structure.global_options.GlobalOptions">
<em class="property">class </em><tt class="descclassname">sage.structure.global_options.</tt><tt class="descname">GlobalOptions</tt><big>(</big><em>name</em>, <em>doc=''</em>, <em>end_doc=''</em>, <em>**options</em><big>)</big><a class="headerlink" href="#sage.structure.global_options.GlobalOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sage_object.html#sage.structure.sage_object.SageObject" title="sage.structure.sage_object.SageObject"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.sage_object.SageObject</span></tt></a></p>
<p>The <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a> class is a generic class for setting and
accessing global options for <tt class="docutils literal"><span class="pre">sage</span></tt> objects. It takes as inputs a
<tt class="docutils literal"><span class="pre">name</span></tt> for the collection of options and a dictionary of dictionaries
which specifies the individual options. The allowed/expected keys in the
dictionary are the following:</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt> &#8211; Specifies a name for the options class (required)</li>
<li><tt class="docutils literal"><span class="pre">doc</span></tt> &#8211; Initial documentation string</li>
<li><tt class="docutils literal"><span class="pre">end_doc</span></tt> &#8211; Final documentation string</li>
<li><tt class="docutils literal"><span class="pre">&lt;options&gt;=dict(...)</span></tt> &#8211; Dictionary specifying an option</li>
</ul>
<p>The options are specified by keyword arguments with their values
being a dictionary which describes the option. The
allowed/expected keys in the dictionary are:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">alias</span></tt> &#8211; Defines alias/synonym for option values</li>
<li><tt class="docutils literal"><span class="pre">alt_name</span></tt> &#8211; Alternative name for an option</li>
<li><tt class="docutils literal"><span class="pre">checker</span></tt> &#8211; A function for checking whether a particular value for
the option is valid</li>
<li><tt class="docutils literal"><span class="pre">default</span></tt> &#8211; The default value of the option</li>
<li><tt class="docutils literal"><span class="pre">description</span></tt> &#8211; Documentation string</li>
<li><tt class="docutils literal"><span class="pre">link_to</span></tt> &#8211; Links to an option for this set of options to an
option in another <a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">setter</span></tt> &#8211; A function (class method) which is called whenever this
option changes</li>
<li><tt class="docutils literal"><span class="pre">values</span></tt> &#8211; A dictionary of the legal values for this option (this
automatically defines the corresponding <tt class="docutils literal"><span class="pre">checker</span></tt>). This dictionary
gives the possible options, as keys, together with a brief description
of them.</li>
<li><tt class="docutils literal"><span class="pre">case_sensitive</span></tt> &#8211; (Default: <tt class="docutils literal"><span class="pre">True</span></tt>) <tt class="docutils literal"><span class="pre">True</span></tt> or <tt class="docutils literal"><span class="pre">False</span></tt> depending on
whether the values of the option are case sensitive.</li>
</ul>
<p>Options and their values can be abbreviated provided that this
abbreviation is a prefix of a unique option.</p>
<p>Calling the options with no arguments results in the list of
current options being printed.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="o">=</span><span class="n">GlobalOptions</span><span class="p">(</span><span class="s1">&#39;menu&#39;</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s1">&#39;Fancy documentation</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">*</span><span class="mi">19</span><span class="p">,</span> <span class="n">end_doc</span><span class="o">=</span><span class="s1">&#39;End of Fancy documentation&#39;</span><span class="p">,</span>
<span class="gp">... </span>      <span class="n">entree</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;soup&#39;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">description</span><span class="o">=</span><span class="s1">&#39;The first course of a meal&#39;</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">soup</span><span class="o">=</span><span class="s1">&#39;soup of the day&#39;</span><span class="p">,</span> <span class="n">bread</span><span class="o">=</span><span class="s1">&#39;oven baked&#39;</span><span class="p">),</span>
<span class="gp">... </span>                  <span class="n">alias</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">rye</span><span class="o">=</span><span class="s1">&#39;bread&#39;</span><span class="p">)),</span>
<span class="gp">... </span>      <span class="n">appetizer</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alt_name</span><span class="o">=</span><span class="s1">&#39;entree&#39;</span><span class="p">),</span>
<span class="gp">... </span>      <span class="n">main</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;pizza&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Main meal&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">pizza</span><span class="o">=</span><span class="s1">&#39;thick crust&#39;</span><span class="p">,</span> <span class="n">pasta</span><span class="o">=</span><span class="s1">&#39;penne arrabiata&#39;</span><span class="p">),</span>
<span class="gp">... </span>                <span class="n">case_sensitive</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span>
<span class="gp">... </span>      <span class="n">dessert</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;espresso&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Dessert&#39;</span><span class="p">,</span>
<span class="gp">... </span>                   <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">espresso</span><span class="o">=</span><span class="s1">&#39;life begins again&#39;</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">cake</span><span class="o">=</span><span class="s1">&#39;waist begins again&#39;</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">cream</span><span class="o">=</span><span class="s1">&#39;fluffy white stuff&#39;</span><span class="p">)),</span>
<span class="gp">... </span>      <span class="n">tip</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Reward for good service&#39;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">checker</span><span class="o">=</span><span class="k">lambda</span> <span class="n">tip</span><span class="p">:</span> <span class="n">tip</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>
<span class="gp">... </span>  <span class="p">)</span>
<span class="gp">sage: </span><span class="n">menu</span>
<span class="go">options for menu</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="n">entree</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>         <span class="c1"># unambiguous abbreviations are allowed</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="mi">15</span><span class="p">);</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">menu</span><span class="p">[</span><span class="s1">&#39;tip&#39;</span><span class="p">],</span> <span class="n">menu</span><span class="p">(</span><span class="s1">&#39;t&#39;</span><span class="p">))</span>
<span class="go">(15, 15)</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">()</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: espresso</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     15</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="o">.</span><span class="n">reset</span><span class="p">();</span> <span class="n">menu</span><span class="p">()</span>
<span class="go">Current options for menu</span>
<span class="go">  - dessert: espresso</span>
<span class="go">  - entree:  soup</span>
<span class="go">  - main:    pizza</span>
<span class="go">  - tip:     10</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">[</span><span class="s1">&#39;tip&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">40</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">40 is not a valid value for tip in the options for menu</span>
<span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>           <span class="c1"># ambiguous abbreviations are not allowed</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">p is not a valid value for main in the options for menu</span>
</pre></div>
</div>
<p>The documentation for the options class is automatically generated from the
information which specifies the options:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Fancy documentation
-------------------

OPTIONS:

- dessert:  (default: espresso)
  Dessert

  - ``cake``     -- waist begins again
  - ``cream``    -- fluffy white stuff
  - ``espresso`` -- life begins again

- entree:  (default: soup)
  The first course of a meal

  - ``bread`` -- oven baked
  - ``rye``   -- alias for bread
  - ``soup``  -- soup of the day

- main:  (default: pizza)
  Main meal

  - ``pasta`` -- penne arrabiata
  - ``pizza`` -- thick crust

- tip:  (default: 10)
  Reward for good service

End of Fancy documentation

See :class:`~sage.structure.global_options.GlobalOptions` for more features of these options.
</pre></div>
</div>
<p>The possible values for an individual option can be obtained by
(trying to) set it equal to &#8216;?&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="n">menu</span><span class="p">(</span><span class="n">des</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">)</span>
<span class="go">- ``dessert`` -- (default: ``espresso``)</span>
<span class="go">  Dessert</span>

<span class="go">  - ``cake``     -- waist begins again</span>
<span class="go">  - ``cream``    -- fluffy white stuff</span>
<span class="go">  - ``espresso`` -- life begins again</span>

<span class="go">Current value: espresso</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.structure.global_options.GlobalOptions.default_value">
<tt class="descname">default_value</tt><big>(</big><em>option</em><big>)</big><a class="headerlink" href="#sage.structure.global_options.GlobalOptions.default_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the default value of the option.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="n">FoodOptions</span><span class="o">=</span><span class="n">GlobalOptions</span><span class="p">(</span><span class="s1">&#39;daily meal&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">food</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">apple</span><span class="o">=</span><span class="s1">&#39;a fruit&#39;</span><span class="p">,</span><span class="n">pair</span><span class="o">=</span><span class="s1">&#39;of what?&#39;</span><span class="p">)),</span>
<span class="gp">... </span>        <span class="n">drink</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;water&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">water</span><span class="o">=</span><span class="s1">&#39;a drink&#39;</span><span class="p">,</span><span class="n">wine</span><span class="o">=</span><span class="s1">&#39;a lifestyle&#39;</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">FoodOptions</span><span class="o">.</span><span class="n">default_value</span><span class="p">(</span><span class="s1">&#39;food&#39;</span><span class="p">)</span>
<span class="go">&#39;apple&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.global_options.GlobalOptions.dispatch">
<tt class="descname">dispatch</tt><big>(</big><em>obj</em>, <em>dispatch_to</em>, <em>option</em>, <em>*args</em>, <em>**kargs</em><big>)</big><a class="headerlink" href="#sage.structure.global_options.GlobalOptions.dispatch" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">title</p>
</div>
<p>The <em>dispatchable</em> options are options which dispatch related methods of
the corresponding class - or user defined methods which are passed to
<a class="reference internal" href="#sage.structure.global_options.GlobalOptions" title="sage.structure.global_options.GlobalOptions"><tt class="xref py py-class docutils literal"><span class="pre">GlobalOptions</span></tt></a>. The format for specifying a dispatchable option
is to include <tt class="docutils literal"><span class="pre">dispatch_to</span> <span class="pre">=</span> <span class="pre">&lt;option</span> <span class="pre">name&gt;</span></tt> in the specifications for
the options and then to add the options to the (element) class. Each
option is then assumed to be a method of the element class with a name
of the form <tt class="docutils literal"><span class="pre">&lt;option</span> <span class="pre">name&gt;</span> <span class="pre">+</span> <span class="pre">'_'</span> <span class="pre">+</span> <span class="pre">&lt;current</span> <span class="pre">vale</span> <span class="pre">for</span> <span class="pre">this</span> <span class="pre">option'</span></tt>.
These options are called by the element class via:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dispatch_to</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the argument <tt class="docutils literal"><span class="pre">self</span></tt> is necessary here because the
dispatcher is a method of the options class and not of
<tt class="docutils literal"><span class="pre">self</span></tt>. The value of the option can also be set to a
user-defined function, with arguments <tt class="docutils literal"><span class="pre">self</span></tt> and <tt class="docutils literal"><span class="pre">option</span></tt>;
in this case the user&#8217;s function is called instead.</p>
<p>EXAMPLES:</p>
<p>Here is a contrived example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="n">DelimitedListOptions</span><span class="o">=</span><span class="n">GlobalOptions</span><span class="p">(</span><span class="s1">&#39;list delimiters&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">delim</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="s1">&#39;brackets&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">:</span><span class="s1">&#39;parentheses&#39;</span><span class="p">}))</span>
<span class="gp">sage: </span><span class="k">class</span> <span class="nc">DelimitedList</span><span class="p">(</span><span class="n">CombinatorialObject</span><span class="p">):</span>
<span class="gp">... </span>     <span class="n">options</span><span class="o">=</span><span class="n">DelimitedListOptions</span>
<span class="gp">... </span>     <span class="k">def</span> <span class="nf">_repr_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">)</span>
<span class="gp">... </span>     <span class="k">def</span> <span class="nf">_repr_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">)</span>
<span class="gp">... </span>     <span class="k">def</span> <span class="nf">_repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_repr_&#39;</span><span class="p">,</span><span class="s1">&#39;delim&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">dlist</span><span class="o">=</span><span class="n">DelimitedList</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span> <span class="n">dlist</span>
<span class="go">[1,2,3]</span>
<span class="gp">sage: </span><span class="n">dlist</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">delim</span><span class="o">=</span><span class="s1">&#39;p&#39;</span><span class="p">);</span> <span class="n">dlist</span>
<span class="go">(1,2,3)</span>
<span class="gp">sage: </span><span class="n">dlist</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="n">delim</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list</span><span class="p">));</span> <span class="n">dlist</span>
<span class="go">&lt;1,2,3&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.structure.global_options.GlobalOptions.reset">
<tt class="descname">reset</tt><big>(</big><em>option=None</em><big>)</big><a class="headerlink" href="#sage.structure.global_options.GlobalOptions.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset options to their default value.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">option</span></tt> &#8211; (Default: <tt class="docutils literal"><span class="pre">None</span></tt>) The name of an option as a string
or <tt class="docutils literal"><span class="pre">None</span></tt>. If <tt class="docutils literal"><span class="pre">option</span></tt> is specified only this option is reset to
its default value; otherwise all options are reset.</li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.structure.global_options</span> <span class="kn">import</span> <span class="n">GlobalOptions</span>
<span class="gp">sage: </span><span class="n">opts</span><span class="o">=</span><span class="n">GlobalOptions</span><span class="p">(</span><span class="s1">&#39;daily meal&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="n">food</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;bread&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">bread</span><span class="o">=</span><span class="s1">&#39;rye bread&#39;</span><span class="p">,</span> <span class="n">salmon</span><span class="o">=</span><span class="s1">&#39;a fish&#39;</span><span class="p">)),</span>
<span class="gp">... </span>     <span class="n">drink</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;water&#39;</span><span class="p">,</span><span class="n">values</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">water</span><span class="o">=</span><span class="s1">&#39;essential for life&#39;</span><span class="p">,</span><span class="n">wine</span><span class="o">=</span><span class="s1">&#39;essential&#39;</span><span class="p">)))</span>
<span class="gp">sage: </span><span class="n">opts</span><span class="p">(</span><span class="n">food</span><span class="o">=</span><span class="s1">&#39;salmon&#39;</span><span class="p">);</span> <span class="n">opts</span><span class="p">()</span>
<span class="go">Current options for daily meal</span>
<span class="go">  - drink: water</span>
<span class="go">  - food:  salmon</span>
<span class="gp">sage: </span><span class="n">opts</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="s1">&#39;drink&#39;</span><span class="p">);</span> <span class="n">opts</span><span class="p">()</span>
<span class="go">Current options for daily meal</span>
<span class="go">  - drink: water</span>
<span class="go">  - food:  salmon</span>
<span class="gp">sage: </span><span class="n">opts</span><span class="o">.</span><span class="n">reset</span><span class="p">();</span> <span class="n">opts</span><span class="p">()</span>
<span class="go">Current options for daily meal</span>
<span class="go">  - drink: water</span>
<span class="go">  - food:  bread</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Global options</a><ul>
<li><a class="reference internal" href="#construction-of-options-classes">Construction of options classes</a></li>
<li><a class="reference internal" href="#accessing-and-setting-option-values">Accessing and setting option values</a></li>
<li><a class="reference internal" href="#setter-functions">Setter functions</a></li>
<li><a class="reference internal" href="#documentation-for-options">Documentation for options</a></li>
<li><a class="reference internal" href="#dispatchers">Dispatchers</a></li>
<li><a class="reference internal" href="#doc-testing">Doc testing</a></li>
<li><a class="reference internal" href="#tests">Tests</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="nonexact.html"
                                  title="previous chapter">Precision management for non-exact objects</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="parent_old.html"
                                  title="next chapter">Base class for old-style parent objects</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/sage/structure/global_options.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" size="18" />
               <!-- The shading of the "Go" button should be consistent -->
               <!-- with the colour of the header and footer. See the file -->
               <!-- doc/common/themes/sage/theme.conf for colours used by -->
               <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="parent_old.html" title="Base class for old-style parent objects"
             >next</a> |</li>
        <li class="right" >
          <a href="nonexact.html" title="Precision management for non-exact objects"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Basic Structures</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2016, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>