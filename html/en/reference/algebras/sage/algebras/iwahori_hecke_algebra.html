<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Iwahori-Hecke Algebras &mdash; Sage Reference Manual v6.6: Algebras</title>
    
    <link rel="stylesheet" href="../../../_static/sage.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <script type="text/javascript" src="../../../_static/MathJax.js?config=TeX-AMS_HTML-full,../mathjax_sage.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="Sage Reference Manual v6.6: Algebras" href="../../index.html" />
    <link rel="next" title="Nil-Coxeter Algebra" href="nil_coxeter_algebra.html" />
    <link rel="prev" title="Iwahori-Hecke Algebras" href="" />
    <link rel="icon" href="../../../_static/sageicon.png" type="image/x-icon" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="nil_coxeter_algebra.html" title="Nil-Coxeter Algebra"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="#" title="Iwahori-Hecke Algebras"
             accesskey="P">previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Algebras</a> &raquo;</li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="iwahori-hecke-algebras">
<span id="sage-algebras-iwahori-hecke-algebra"></span><h1>Iwahori-Hecke Algebras<a class="headerlink" href="#iwahori-hecke-algebras" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-sage.algebras.iwahori_hecke_algebra"></span><p>AUTHORS:</p>
<ul class="simple">
<li>Daniel Bump, Nicolas Thiery (2010): Initial version</li>
<li>Brant Jones, Travis Scrimshaw, Andrew Mathas (2013):
Moved into the category framework and implemented the
Kazhdan-Lusztig <span class="math">\(C\)</span> and <span class="math">\(C^{\prime}\)</span> bases</li>
</ul>
<dl class="class">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra">
<em class="property">class </em><tt class="descclassname">sage.algebras.iwahori_hecke_algebra.</tt><tt class="descname">IwahoriHeckeAlgebra</tt><big>(</big><em>W</em>, <em>q1</em>, <em>q2</em>, <em>base_ring</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../structure/sage/structure/parent.html#sage.structure.parent.Parent" title="(in Sage Reference Manual: Basic Structures v6.6)"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.parent.Parent</span></tt></a>, <a class="reference external" href="../../../structure/sage/structure/unique_representation.html#sage.structure.unique_representation.UniqueRepresentation" title="(in Sage Reference Manual: Basic Structures v6.6)"><tt class="xref py py-class docutils literal"><span class="pre">sage.structure.unique_representation.UniqueRepresentation</span></tt></a></p>
<p>Returns the Iwahori-Hecke algebra of the Coxeter group <tt class="docutils literal"><span class="pre">W</span></tt>
with the specified parameters.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">W</span></tt> &#8211; a Coxeter group or Cartan type</li>
<li><tt class="docutils literal"><span class="pre">q1</span></tt> &#8211; a parameter</li>
</ul>
<p>OPTIONAL ARGUMENTS:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">q2</span></tt> &#8211; (default <tt class="docutils literal"><span class="pre">-1</span></tt>) another parameter</li>
<li><tt class="docutils literal"><span class="pre">base_ring</span></tt> &#8211; (default <tt class="docutils literal"><span class="pre">q1.parent()</span></tt>) a ring containing <tt class="docutils literal"><span class="pre">q1</span></tt>
and <tt class="docutils literal"><span class="pre">q2</span></tt></li>
</ul>
<p>The Iwahori-Hecke algebra <a class="reference internal" href="#i64" id="id1">[I64]</a> is a deformation of the group algebra of
a Weyl group or, more generally, a Coxeter group. These algebras are
defined by generators and relations and they depend on a deformation
parameter <span class="math">\(q\)</span>. Taking <span class="math">\(q = 1\)</span>, as in the following example, gives a ring
isomorphic to the group algebra of the corresponding Coxeter group.</p>
<p>Let <span class="math">\((W, S)\)</span> be a Coxeter system and let <span class="math">\(R\)</span> be a commutative ring
containing elements <span class="math">\(q_1\)</span> and <span class="math">\(q_2\)</span>. Then the <em>Iwahori-Hecke algebra</em>
<span class="math">\(H = H_{q_1,q_2}(W,S)\)</span> of <span class="math">\((W,S)\)</span> with parameters <span class="math">\(q_1\)</span> and <span class="math">\(q_2\)</span> is the
unital associative algebra with generators <span class="math">\(\{T_s \mid s\in S\}\)</span> and
relations:</p>
<div class="math">
\[\begin{split}\begin{aligned}
    (T_s - q_1)(T_s - q_2) &amp;= 0\\
    T_r T_s T_r \cdots &amp;= T_s T_r T_s \cdots,
\end{aligned}\end{split}\]</div>
<p>where the number of terms on either side of the second relations (the braid
relations) is the order of <span class="math">\(rs\)</span> in the Coxeter group <span class="math">\(W\)</span>, for <span class="math">\(r,s \in S\)</span>.</p>
<p>Iwahori-Hecke algebras are fundamental in many areas of mathematics,
ranging from the representation theory of Lie groups and quantum groups,
to knot theory and statistical mechanics. For more information see,
for example, <a class="reference internal" href="../../../combinat/sage/combinat/kazhdan_lusztig.html#kl79" id="id2">[KL79]</a>, <a class="reference internal" href="#hkp" id="id3">[HKP]</a>, <a class="reference internal" href="#j87" id="id4">[J87]</a> and
<a class="reference external" href="http://en.wikipedia.org/wiki/Iwahori-Hecke_algebra">Wikipedia article Iwahori-Hecke_algebra</a>.</p>
<p class="rubric">Bases</p>
<p>A reduced expression for an element <span class="math">\(w \in W\)</span> is any minimal length
word <span class="math">\(w = s_1 \cdots s_k\)</span>, with <span class="math">\(s_i \in S\)</span>. If <span class="math">\(w = s_1 \cdots s_k\)</span> is a
reduced expression for <span class="math">\(w\)</span> then Matsumoto&#8217;s Monoid Lemma implies that
<span class="math">\(T_w = T_{s_1} \cdots T_{s_k}\)</span> depends on <span class="math">\(w\)</span> and not on the choice of
reduced expressions. Moreover, <span class="math">\(\{ T_w \mid w\in W \}\)</span> is a basis for the
Iwahori-Hecke algebra <span class="math">\(H\)</span> and</p>
<div class="math">
\[\begin{split}T_s T_w = \begin{cases}
   T_{sw}, &amp;                     \text{if } \ell(sw) = \ell(w)+1,\\
   (q_1+q_2)T_w -q_1q_2 T_{sw}, &amp; \text{if } \ell(sw) = \ell(w)-1.
\end{cases}\end{split}\]</div>
<p>The <span class="math">\(T\)</span>-basis of <span class="math">\(H\)</span> is implemented for any choice of parameters
<tt class="docutils literal"><span class="pre">q_1</span></tt> and <tt class="docutils literal"><span class="pre">q_2</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">T[1]</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">T</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">T[1,2,1] + T[2]</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="go">(u+v)*T[1,2,1] + (-u*v)*T[2,1]</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">^-</span><span class="mi">1</span>
<span class="go">(-u^-1*v^-1)*T[1] + (v^-1+u^-1)</span>
</pre></div>
</div>
<p>Working over the Laurent polynomial ring <span class="math">\(Z[q^{\pm 1/2}]\)</span> Kazhdan and
Lusztig proved that there exist two distinguished bases
<span class="math">\(\{ C^{\prime}_w \mid w \in W \}\)</span> and <span class="math">\(\{ C_w \mid w \in W \}\)</span> of <span class="math">\(H\)</span>
which are uniquely determined by the properties that they are invariant
under the bar involution on <span class="math">\(H\)</span> and have triangular transitions matrices
with polynomial entries of a certain form with the <span class="math">\(T\)</span>-basis;
see <a class="reference internal" href="../../../combinat/sage/combinat/kazhdan_lusztig.html#kl79" id="id5">[KL79]</a> for a precise statement.</p>
<p>It turns out that the Kazhdan-Lusztig bases can be defined (by
specialization) in <span class="math">\(H\)</span> whenever <span class="math">\(-q_1 q_2\)</span> is a square in the base ring.
The Kazhdan-Lusztig bases are implemented inside <span class="math">\(H\)</span> whenever <span class="math">\(-q_1 q_2\)</span>
has a square root:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">u</span><span class="o">^</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="n">v</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">();</span> <span class="n">Cp</span><span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">();</span> <span class="n">C</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">(u^-1*v^-1)*T[1] + (u^-1*v)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">(u^-1*v^-1)*T[1] + (-u*v^-1)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">Cp[1] + (-u*v^-1-u^-1*v)</span>
<span class="gp">sage: </span><span class="n">elt</span> <span class="o">=</span> <span class="n">Cp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="n">Cp</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="n">elt</span>
<span class="go">Cp[2,3] + Cp[1] + (-u*v^-1-u^-1*v)</span>
<span class="gp">sage: </span><span class="n">c</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="n">elt</span><span class="p">);</span> <span class="n">c</span>
<span class="go">C[2,3] + C[1] + (u*v^-1+u^-1*v)*C[2] + (u*v^-1+u^-1*v)*C[3] + (u^2*v^-2+2+u^-2*v^2)</span>
<span class="gp">sage: </span><span class="n">t</span> <span class="o">=</span> <span class="n">T</span><span class="p">(</span><span class="n">c</span><span class="p">);</span> <span class="n">t</span>
<span class="go">(u^-2*v^-2)*T[2,3] + (u^-1*v^-1)*T[1] + (u^-2)*T[2] + (u^-2)*T[3] + (-u*v^-1+u^-2*v^2)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">Cp[2,3] + Cp[1] + (-u*v^-1-u^-1*v)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">Cp[2,3] + Cp[1] + (-u*v^-1-u^-1*v)</span>
</pre></div>
</div>
<p>The conversions to and from the Kazhdan-Lusztig bases are done behind the
scenes whenever the Kazhdan-Lusztig bases are well-defined. Once a suitable
Iwahori-Hecke algebra is defined they will work without further
intervention.</p>
<p>For example, with the &#8220;standard parameters&#8221;, so that
<span class="math">\((T_r-q^2)(T_r+1) = 0\)</span>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">q</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">();</span> <span class="n">Cp</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">();</span> <span class="n">C</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">q*C[1] + q^2</span>
<span class="gp">sage: </span><span class="n">elt</span> <span class="o">=</span> <span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span> <span class="n">elt</span>
<span class="go">q^3*Cp[1,2,1] - q^2*Cp[1,2] - q^2*Cp[2,1] + q*Cp[1] + q*Cp[2] - 1</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
<span class="go">q^3*C[1,2,1] + q^4*C[1,2] + q^4*C[2,1] + q^5*C[1] + q^5*C[2] + q^6</span>
</pre></div>
</div>
<p>With the &#8220;normalized presentation&#8221;, so that <span class="math">\((T_r-q)(T_r+q^{-1}) = 0\)</span>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="o">-</span><span class="n">q</span><span class="o">^-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">();</span> <span class="n">Cp</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">();</span> <span class="n">C</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">C[1] + q</span>
<span class="gp">sage: </span><span class="n">elt</span> <span class="o">=</span> <span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]);</span> <span class="n">elt</span>
<span class="go">Cp[1,2,1] - (q^-1)*Cp[1,2] - (q^-1)*Cp[2,1] + (q^-2)*Cp[1] + (q^-2)*Cp[2] - (q^-3)</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
<span class="go">C[1,2,1] + q*C[1,2] + q*C[2,1] + q^2*C[1] + q^2*C[2] + q^3</span>
</pre></div>
</div>
<p>In the group algebra, so that <span class="math">\((T_r-1)(T_r+1) = 0\)</span>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">();</span> <span class="n">Cp</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">();</span> <span class="n">C</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">C[1] + 1</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="go">Cp[1,2,1] - Cp[1,2] - Cp[2,1] + Cp[1] + Cp[2] - 1</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">_</span><span class="p">)</span>
<span class="go">C[1,2,1] + C[1,2] + C[2,1] + C[1] + C[2] + 1</span>
</pre></div>
</div>
<p>On the other hand, if the Kazhdan-Lusztig bases are not well-defined (when
<span class="math">\(-q_1 q_2\)</span> is not a square), attempting to use the Kazhdan-Lusztig bases
triggers an error:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;=</span><span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">C</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="nc">ValueError</span>: <span class="n-Identifier">The Kazhdan_Lusztig bases are defined only when -q_1*q_2 is a square</span>
</pre></div>
</div>
<p>We give an example in affine type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">([</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">v</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">();</span> <span class="n">Cp</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">();</span> <span class="n">C</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">v^3*C[1,0,2] + v^4*C[1,0] + v^4*C[0,2] + v^4*C[1,2]</span>
<span class="go"> + v^5*C[0] + v^5*C[2] + v^5*C[1] + v^6</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">v^3*Cp[1,0,2] - v^2*Cp[1,0] - v^2*Cp[0,2] - v^2*Cp[1,2]</span>
<span class="go"> + v*Cp[0] + v*Cp[2] + v*Cp[1] - 1</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">(v^-3)*T[1,0,2] - (v^-1)*T[1,0] - (v^-1)*T[0,2] - (v^-1)*T[1,2]</span>
<span class="go"> + v*T[0] + v*T[2] + v*T[1] - v^3</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">(v^-3)*T[1,0,2] + (v^-3)*T[1,0] + (v^-3)*T[0,2] + (v^-3)*T[1,2]</span>
<span class="go"> + (v^-3)*T[0] + (v^-3)*T[2] + (v^-3)*T[1] + (v^-3)</span>
</pre></div>
</div>
<p>REFERENCES:</p>
<table class="docutils citation" frame="void" id="i64" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[I64]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id8">2</a>)</em> N. Iwahori, On the structure of a Hecke ring of a
Chevalley group over a finite field,  J. Fac. Sci. Univ. Tokyo Sect.
I, 10 (1964), 215&#8211;236 (1964). <a class="reference external" href="http://www.ams.org/mathscinet-getitem?mr=MR0165016">MathSciNet MR0165016</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="hkp" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[HKP]</a></td><td>T. J. Haines, R. E. Kottwitz, A. Prasad,
Iwahori-Hecke Algebras, J. Ramanujan Math. Soc., 25 (2010), 113&#8211;145.
<a class="reference external" href="http://arxiv.org/abs/0309168v3">Arxiv 0309168v3</a> <a class="reference external" href="http://www.ams.org/mathscinet-getitem?mr=MR2642451">MathSciNet MR2642451</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="j87" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[J87]</a></td><td>V. Jones, Hecke algebra representations of braid groups and
link polynomials.  Ann. of Math. (2) 126 (1987), no. 2, 335&#8211;388.
<a class="reference external" href="http://dx.doi.org/10.2307/1971403">doi:10.2307/1971403</a> <a class="reference external" href="http://www.ams.org/mathscinet-getitem?mr=MR0908150">MathSciNet MR0908150</a></td></tr>
</tbody>
</table>
<p>EXAMPLES:</p>
<p>We start by creating a Iwahori-Hecke algebra together with the three bases
for these algebras that are currently supported:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
</pre></div>
</div>
<p>It is also possible to define these three bases quickly using
the <tt class="xref py py-meth docutils literal"><span class="pre">inject_shorthands()</span></tt> method.</p>
<p>Next we create our generators for the <span class="math">\(T\)</span>-basis and do some basic
computations and conversions between the bases:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">,</span><span class="n">T3</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span> <span class="o">==</span> <span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span> <span class="o">==</span> <span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">T1</span> <span class="o">+</span> <span class="n">T2</span>
<span class="go">T[1] + T[2]</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="o">*</span><span class="n">T1</span>
<span class="go">-(1-v^2)*T[1] + v^2</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">T1</span> <span class="o">+</span> <span class="n">T2</span><span class="p">)</span><span class="o">*</span><span class="n">T3</span> <span class="o">+</span> <span class="n">T1</span><span class="o">*</span><span class="n">T1</span> <span class="o">-</span> <span class="p">(</span><span class="n">v</span> <span class="o">+</span> <span class="n">v</span><span class="o">^-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">T2</span>
<span class="go">T[3,1] + T[2,3] - (1-v^2)*T[1] - (v^-1+v)*T[2] + v^2</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T1</span><span class="p">)</span>
<span class="go">v*Cp[1] - 1</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">((</span><span class="n">v</span><span class="o">^</span><span class="mi">1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span> <span class="o">-</span> <span class="n">T3</span><span class="p">)</span>
<span class="go">-(v^2-v^3)*Cp[1,2] + (v-v^2)*Cp[1] + (v-v^2)*Cp[2] - v*Cp[3] + v</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T1</span><span class="p">)</span>
<span class="go">v*C[1] + v^2</span>
<span class="gp">sage: </span><span class="n">p</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="n">T2</span><span class="o">*</span><span class="n">T3</span> <span class="o">-</span> <span class="n">v</span><span class="o">*</span><span class="n">T1</span><span class="p">);</span> <span class="n">p</span>
<span class="go">v^2*C[2,3] - v^2*C[1] + v^3*C[2] + v^3*C[3] - (v^3-v^4)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">v^2*Cp[2,3] - v^2*Cp[1] - v*Cp[2] - v*Cp[3] + (1+v)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T2</span><span class="o">*</span><span class="n">T3</span> <span class="o">-</span> <span class="n">v</span><span class="o">*</span><span class="n">T1</span><span class="p">)</span>
<span class="go">v^2*Cp[2,3] - v^2*Cp[1] - v*Cp[2] - v*Cp[3] + (1+v)</span>
</pre></div>
</div>
<p>In addition to explicitly creating generators, we have two shortcuts to
basis elements. The first is by using elements of the underlying Coxeter
group, the other is by using reduced words:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s3</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">gens</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="o">*</span><span class="n">s3</span><span class="p">]</span> <span class="o">==</span> <span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T3</span>
<span class="go">True</span>
</pre></div>
</div>
<p>TESTS:</p>
<p>We check the defining properties of the bases:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">(v^-1)*T[1] + (v^-1)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">(v^-1)*T[1] - v</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">C[1] + (v^-1+v)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">Cp[1] - (v^-1+v)</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span> <span class="o">==</span> <span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span> <span class="o">==</span> <span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">KL</span> <span class="o">=</span> <span class="n">KazhdanLusztigPolynomial</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">term</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">^</span><span class="n">y</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">*</span> <span class="n">v</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">y</span><span class="o">.</span><span class="n">length</span><span class="p">())</span> <span class="o">*</span> <span class="n">KL</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="n">v</span><span class="o">^-</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">T</span><span class="p">[</span><span class="n">y</span><span class="p">]</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="o">==</span> <span class="p">(</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">^</span><span class="n">x</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">term</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="o">==</span> <span class="n">v</span><span class="o">^-</span><span class="n">x</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">KL</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="n">v</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">T</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
</pre></div>
</div>
<p>We check conversion between the bases for type <span class="math">\(B_2\)</span> as well as some of
the defining properties:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">([</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">C</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">Cp</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span> <span class="o">==</span> <span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span> <span class="o">==</span> <span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">KL</span> <span class="o">=</span> <span class="n">KazhdanLusztigPolynomial</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">term</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">^</span><span class="n">y</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="o">*</span> <span class="n">v</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">y</span><span class="o">.</span><span class="n">length</span><span class="p">())</span> <span class="o">*</span> <span class="n">KL</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="n">v</span><span class="o">^-</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">T</span><span class="p">[</span><span class="n">y</span><span class="p">]</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="o">==</span> <span class="p">(</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">^</span><span class="n">x</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">term</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="o">==</span> <span class="n">v</span><span class="o">^-</span><span class="n">x</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">KL</span><span class="o">.</span><span class="n">P</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="n">v</span><span class="o">^</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">T</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Implement multi-parameter Iwahori-Hecke algebras together with their
Kazhdan-Lusztig bases. That is, Iwahori-Hecke algebras with (possibly)
different parameters for each conjugacy class of simple reflections
in the underlying Coxeter group.</p>
</div>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">When given &#8220;generic parameters&#8221; we should return the generic
Iwahori-Hecke algebra with these parameters and allow the user to
work inside this algebra rather than doing calculations behind the
scenes in a copy of the generic Iwahori-Hecke algebra. The main
problem is that it is not clear how to recognise when the
parameters are &#8220;generic&#8221;.</p>
</div>
<dl class="class">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.C">
<em class="property">class </em><tt class="descname">C</tt><big>(</big><em>IHAlgebra</em>, <em>prefix=None</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.C" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra._KLHeckeBasis</span></tt></p>
<p>The Kazhdan-Lusztig <span class="math">\(C\)</span>-basis of Iwahori-Hecke algebra.</p>
<p>Assuming the standard quadratic relations of <span class="math">\((T_r-q)(T_r+1)=0\)</span>, for
every element <span class="math">\(w\)</span> in the Coxeter group, there is a unique element
<span class="math">\(C_w\)</span> in the Iwahori-Hecke algebra which is uniquely determined
by the two properties:</p>
<div class="math">
\[\begin{split}\begin{aligned}
    \overline{C_w} &amp;= C_w \\
    C_w &amp;= (-1)^{\ell(w)} q^{\ell(w)/2}
        \sum_{v \leq w} (-q)^{-\ell(v)}\overline{P_{v,w}(q)} T_v
\end{aligned}\end{split}\]</div>
<p>where <span class="math">\(\leq\)</span> is the Bruhat order on the underlying Coxeter group and
<span class="math">\(P_{v,w}(q)\in\ZZ[q,q^{-1}]\)</span> are polynomials in <span class="math">\(\ZZ[q]\)</span> such that
<span class="math">\(P_{w,w}(q) = 1\)</span> and if <span class="math">\(v &lt; w\)</span> then
<span class="math">\(\deg P_{v,w}(q) \leq \frac{1}{2}(\ell(w) - \ell(v) - 1)\)</span>.</p>
<p>More generally, if the quadratic relations are of the form
(T_s-q_1)(T_s-q_2)=0` and <span class="math">\(\sqrt{-q_1q_2}\)</span> exists then for a simple
reflection <span class="math">\(s\)</span> then the corresponding Kazhdan-Lusztig basis element is:</p>
<div class="math">
\[C_s = (-q_1 q_2)^{1/2} (1 - (-q_1 q_2)^{-1/2} T_s).\]</div>
<p>This is related to the <span class="math">\(C^{\prime}\)</span> Kazhdan-Lusztig basis by <span class="math">\(C_i =
-\alpha(C_i^{\prime})\)</span> where <span class="math">\(\alpha\)</span> is the <span class="math">\(\ZZ\)</span>-linear Hecke
involution defined by <span class="math">\(q^{1/2} \mapsto q^{-1/2}\)</span> and <span class="math">\(\alpha(T_i) =
-(q_1 q_2)^{-1/2} T_i\)</span>.</p>
<p>See <a class="reference internal" href="../../../combinat/sage/combinat/kazhdan_lusztig.html#kl79" id="id6">[KL79]</a> for more details.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A5&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s3</span><span class="p">,</span><span class="n">s4</span><span class="p">,</span><span class="n">s5</span> <span class="o">=</span> <span class="n">W</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="go">-(1-v^2)*T[1] + v^2</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">s1</span><span class="p">))</span>
<span class="go">(v^-1)*T[1] - v</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">*</span><span class="n">C</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">*</span><span class="n">C</span><span class="p">(</span><span class="n">s1</span><span class="p">))</span>
<span class="go">(v^-3)*T[1,2,1] - (v^-1)*T[1,2] - (v^-1)*T[2,1] + (v^-1+v)*T[1] + v*T[2] - (v+v^3)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s3</span> <span class="o">=</span> <span class="n">W</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">)</span>
<span class="go">C[1,2,1]</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="go">-(v^-1+v)*C[1]</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">*</span><span class="n">C</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">*</span><span class="n">C</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="go">C[1,2,1] + C[1]</span>
</pre></div>
</div>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="o">==</span> <span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="o">==</span> <span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Check the defining property between <span class="math">\(C\)</span> and <span class="math">\(C^{\prime}\)</span>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">(v^-1)*T[1] - v</span>
<span class="gp">sage: </span><span class="o">-</span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">()</span>
<span class="go">(v^-1)*T[1] - v</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">Cp</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">()</span>
<span class="go">-(v^-1)*T[1] - (v^-1)*T[2] + 2*v</span>
<span class="gp">sage: </span><span class="o">-</span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">C</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="go">-(v^-1)*T[1] - (v^-1)*T[2] + 2*v</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="o">-</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">())</span>
<span class="go">Cp[1]</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="o">-</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">())</span>
<span class="go">Cp[1,2,3]</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">())</span>
<span class="go">Cp[1,2,3,1]</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">C</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="n">x</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="o">*</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">())</span> <span class="o">==</span> <span class="n">C</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.C.hash_involution_on_basis">
<tt class="descname">hash_involution_on_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.C.hash_involution_on_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the effect of applying the hash involution to the basis
element <tt class="docutils literal"><span class="pre">self[w]</span></tt>.</p>
<p>This function is not intended to be called directly. Instead, use
<tt class="xref py py-meth docutils literal"><span class="pre">hash_involution()</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">C</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflection</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">C</span><span class="o">.</span><span class="n">hash_involution_on_basis</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">-C[1] - (v^-1+v)</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">()</span>
<span class="go">-C[1] - (v^-1+v)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.Cp">
<em class="property">class </em><tt class="descclassname">IwahoriHeckeAlgebra.</tt><tt class="descname">Cp</tt><big>(</big><em>IHAlgebra</em>, <em>prefix=None</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.Cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra._KLHeckeBasis</span></tt></p>
<p>The <span class="math">\(C^{\prime}\)</span> Kazhdan-Lusztig basis of Iwahori-Hecke algebra.</p>
<p>Assuming the standard quadratic relations of <span class="math">\((T_r-q)(T_r+1)=0\)</span>, for
every element <span class="math">\(w\)</span> in the Coxeter group, there is a unique element
<span class="math">\(C^{\prime}_w\)</span> in the Iwahori-Hecke algebra which is uniquely determined
by the two properties:</p>
<div class="math">
\[\begin{split}\begin{aligned}
    \overline{ C^{\prime}_w } &amp;= C^{\prime}_w\\
    C^{\prime}_w &amp;= q^{-\ell(w)/2}
        \sum_{v \leq w} P_{v,w}(q) T_v
\end{aligned}\end{split}\]</div>
<p>where <span class="math">\(\leq\)</span> is the Bruhat order on the underlying Coxeter group and
<span class="math">\(P_{v,w}(q) \in \ZZ[q,q^{-1}]\)</span> are polynomials in <span class="math">\(\ZZ[q]\)</span> such that
<span class="math">\(P_{w,w}(q) = 1\)</span> and if <span class="math">\(v &lt; w\)</span> then <span class="math">\(\deg P_{v,w}(q) \leq
\frac{1}{2}(\ell(w)-\ell(v)-1)\)</span>.</p>
<p>More generally, if the quadratic relations are of the form
(T_s-q_1)(T_s-q_2)=0` and <span class="math">\(\sqrt{-q_1q_2}\)</span> exists then for a simple
reflection <span class="math">\(s\)</span> then the corresponding Kazhdan-Lusztig basis element is:</p>
<div class="math">
\[C^{\prime}_s = (-q_1 q_2)^{-1/2} (T_s + 1).\]</div>
<p>See <a class="reference internal" href="../../../combinat/sage/combinat/kazhdan_lusztig.html#kl79" id="id7">[KL79]</a> for more details.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A5&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s3</span><span class="p">,</span><span class="n">s4</span><span class="p">,</span><span class="n">s5</span> <span class="o">=</span> <span class="n">W</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="go">-(1-v^2)*T[1] + v^2</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="p">))</span>
<span class="go">(v^-1)*T[1] + (v^-1)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">*</span><span class="n">Cp</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">*</span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="p">))</span>
<span class="go">(v^-3)*T[1,2,1] + (v^-3)*T[1,2] + (v^-3)*T[2,1]</span>
<span class="go"> + (v^-3+v^-1)*T[1] + (v^-3)*T[2] + (v^-3+v^-1)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s3</span> <span class="o">=</span> <span class="n">W</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">)</span>
<span class="go">Cp[1,2,1]</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="go">(v^-1+v)*Cp[1]</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">*</span><span class="n">Cp</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">*</span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="go">Cp[1,2,1] + Cp[1]</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">*</span><span class="n">Cp</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">*</span><span class="n">Cp</span><span class="p">(</span><span class="n">s3</span><span class="p">)</span><span class="o">*</span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">*</span><span class="n">Cp</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">Cp[1,2,3,1,2] + Cp[1,2,1] + Cp[3,1,2]</span>
</pre></div>
</div>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="o">==</span> <span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="o">==</span> <span class="n">Cp</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.Cp.hash_involution_on_basis">
<tt class="descname">hash_involution_on_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.Cp.hash_involution_on_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the effect of applying the hash involution to the basis
element <tt class="docutils literal"><span class="pre">self[w]</span></tt>.</p>
<p>This function is not intended to be called directly. Instead, use
<tt class="xref py py-meth docutils literal"><span class="pre">hash_involution()</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflection</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="o">.</span><span class="n">hash_involution_on_basis</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">-Cp[1] + (v^-1+v)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">()</span>
<span class="go">-Cp[1] + (v^-1+v)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T">
<em class="property">class </em><tt class="descclassname">IwahoriHeckeAlgebra.</tt><tt class="descname">T</tt><big>(</big><em>algebra</em>, <em>prefix=None</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra._Basis</span></tt></p>
<p>The standard basis of Iwahori-Hecke algebra.</p>
<p>For every simple reflection <span class="math">\(s_i\)</span> of the Coxeter group, there is a
corresponding generator <span class="math">\(T_i\)</span> of Iwahori-Hecke algebra. These
are subject to the relations:</p>
<div class="math">
\[(T_i - q_1) (T_i - q_2) = 0\]</div>
<p>together with the braid relations:</p>
<div class="math">
\[T_i T_j T_i \cdots = T_j T_i T_j \cdots,\]</div>
<p>where the number of terms on each of the two sides is the order of
<span class="math">\(s_i s_j\)</span> in the Coxeter group.</p>
<p>Weyl group elements form a basis of Iwahori-Hecke algebra <span class="math">\(H\)</span>
with the property that if <span class="math">\(w_1\)</span> and <span class="math">\(w_2\)</span> are Coxeter group elements
such that <span class="math">\(\ell(w_1 w_2) = \ell(w_1) + \ell(w_2)\)</span> then
<span class="math">\(T_{w_1 w_2} = T_{w_1} T_{w_2}\)</span>.</p>
<p>With the default value <span class="math">\(q_2 = -1\)</span> and with <span class="math">\(q_1 = q\)</span> the
generating relation may be written
<span class="math">\(T_i^2 = (q-1) \cdot T_i + q \cdot 1\)</span> as in <a class="reference internal" href="#i64" id="id8">[I64]</a>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A3&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">,</span><span class="n">T3</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T3</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T1</span> <span class="o">==</span> <span class="n">T3</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T3</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T3</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">w0</span> <span class="o">=</span> <span class="n">T</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">long_element</span><span class="p">())</span>
<span class="gp">sage: </span><span class="n">w0</span>
<span class="go">T[1,2,3,1,2,1]</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;s&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">.</span><span class="n">an_element</span><span class="p">()</span>
<span class="go">2*s[1,2,3,2,1] + 3*s[1,2,3,1] + s[1,2,3] + 1</span>
</pre></div>
</div>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="o">==</span> <span class="n">T</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span> <span class="o">==</span> <span class="n">T</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
</pre></div>
</div>
<p>We check a property of the bar involution and <span class="math">\(R\)</span>-polynomials:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">KL</span> <span class="o">=</span> <span class="n">KazhdanLusztigPolynomial</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">all</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">(</span><span class="n">v</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">y</span><span class="o">.</span><span class="n">length</span><span class="p">())</span> <span class="o">*</span> <span class="n">KL</span><span class="o">.</span><span class="n">R</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">substitute</span><span class="p">(</span><span class="n">v</span><span class="o">=</span><span class="n">v</span><span class="o">^-</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">T</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">W</span><span class="p">)</span> <span class="c"># long time</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="class">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.Element">
<em class="property">class </em><tt class="descname">Element</tt><big>(</big><em>M</em>, <em>x</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.Element" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="../../../combinat/sage/combinat/free_module.html#sage.combinat.free_module.CombinatorialFreeModuleElement" title="(in Sage Reference Manual: Combinatorics v6.6)"><tt class="xref py py-class docutils literal"><span class="pre">sage.combinat.free_module.CombinatorialFreeModuleElement</span></tt></a></p>
<p>A class for elements of an Iwahori-Hecke algebra in the <span class="math">\(T\)</span> basis.</p>
<p>TESTS:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;B3&quot;</span><span class="p">,</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">,</span><span class="n">T3</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T3</span>
<span class="go">2*T[2,3] + T[1]</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="o">*</span><span class="n">T1</span>
<span class="go">(q-1)*T[1] + q</span>

<span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q1</span><span class="p">,</span><span class="n">q2</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="o">=</span><span class="n">q2</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;x&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="nb">sum</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">())</span><span class="o">^</span><span class="mi">2</span>
<span class="go">x[1,2] + x[2,1] + (q1+q2)*x[1] + (q1+q2)*x[2] + (-2*q1*q2)</span>

<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="o">=</span><span class="n">q2</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;t&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">t1</span><span class="p">,</span><span class="n">t2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t2</span><span class="p">)</span><span class="o">^</span><span class="mi">3</span>
<span class="go">(q1^2-q1*q2+q2^2)*t[1] + (-q1^2+q1*q2-q2^2)*t[2]</span>

<span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;G2&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">]</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span> <span class="o">==</span> <span class="n">T2</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T1</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">T1</span> <span class="o">==</span> <span class="n">T2</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span>
<span class="go">False</span>

<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">]</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="o">+</span><span class="n">T2</span>
<span class="go">T[1] + T[2]</span>

<span class="gp">sage: </span><span class="o">-</span><span class="p">(</span><span class="n">T1</span><span class="o">+</span><span class="n">T2</span><span class="p">)</span>
<span class="go">-T[1] - T[2]</span>
<span class="gp">sage: </span><span class="mi">1</span><span class="o">-</span><span class="n">T1</span>
<span class="go">-T[1] + 1</span>

<span class="gp">sage: </span><span class="n">T1</span><span class="o">.</span><span class="n">parent</span><span class="p">()</span>
<span class="go">Iwahori-Hecke algebra of type A2 in 1,-1 over Integer Ring in the T-basis</span>
</pre></div>
</div>
<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.Element.inverse">
<tt class="descname">inverse</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.Element.inverse" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the inverse if <tt class="docutils literal"><span class="pre">self</span></tt> is a basis element.</p>
<p>An element is a basis element if it is <span class="math">\(T_w\)</span> where <span class="math">\(w\)</span> is in
the Weyl group. The base ring must be a field or Laurent
polynomial ring. Other elements of the ring have inverses but
the inverse method is only implemented for the basis elements.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">]</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="p">)</span><span class="o">.</span><span class="n">inverse</span><span class="p">();</span> <span class="n">x</span>
<span class="go">(q^-2)*T[2,1] + (q^-2-q^-1)*T[1] + (q^-2-q^-1)*T[2] + (q^-2-2*q^-1+1)</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span>
<span class="go">1</span>
</pre></div>
</div>
<p>TESTS:</p>
<p>We check some alternative forms of input for inverting
an element:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="o">~</span><span class="p">(</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="p">)</span>
<span class="go">(q^-2)*T[2,1] + (q^-2-q^-1)*T[1] + (q^-2-q^-1)*T[2] + (q^-2-2*q^-1+1)</span>
<span class="gp">sage: </span><span class="p">(</span><span class="n">T1</span><span class="o">*</span><span class="n">T2</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="go">(q^-2)*T[2,1] + (q^-2-q^-1)*T[1] + (q^-2-q^-1)*T[2] + (q^-2-2*q^-1+1)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.bar_on_basis">
<tt class="descclassname">IwahoriHeckeAlgebra.T.</tt><tt class="descname">bar_on_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.bar_on_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the bar involution of <span class="math">\(T_w\)</span>, which is <span class="math">\(T^{-1}_{w^-1}\)</span>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s3</span> <span class="o">=</span> <span class="n">W</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">b</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">bar_on_basis</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s3</span><span class="p">);</span> <span class="n">b</span>
<span class="go">(v^-6)*T[1,2,3]</span>
<span class="go"> + (v^-6-v^-4)*T[1,2]</span>
<span class="go"> + (v^-6-v^-4)*T[3,1]</span>
<span class="go"> + (v^-6-v^-4)*T[2,3]</span>
<span class="go"> + (v^-6-2*v^-4+v^-2)*T[1]</span>
<span class="go"> + (v^-6-2*v^-4+v^-2)*T[2]</span>
<span class="go"> + (v^-6-2*v^-4+v^-2)*T[3]</span>
<span class="go"> + (v^-6-3*v^-4+3*v^-2-1)</span>
<span class="gp">sage: </span><span class="n">b</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
<span class="go">T[1,2,3]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.hash_involution_on_basis">
<tt class="descclassname">IwahoriHeckeAlgebra.T.</tt><tt class="descname">hash_involution_on_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.hash_involution_on_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the hash involution on the basis element <tt class="docutils literal"><span class="pre">self[w]</span></tt>.</p>
<p>The hash involution <span class="math">\(\alpha\)</span> is a <span class="math">\(\ZZ\)</span>-algebra
involution of the Iwahori-Hecke algebra determined by
<span class="math">\(q^{1/2} \mapsto q^{-1/2}\)</span>, and <span class="math">\(T_w \mapsto -1^{\ell(w)}
(q_1 q_2)^{-\ell(w)} T_w\)</span>, for <span class="math">\(w\)</span> an element of the
corresponding Coxeter group.</p>
<p>This map is defined in <a class="reference internal" href="../../../combinat/sage/combinat/kazhdan_lusztig.html#kl79" id="id9">[KL79]</a> and it is used to change between
the <span class="math">\(C\)</span> and <span class="math">\(C^{\prime}\)</span> bases because
<span class="math">\(\alpha(C_w) = (-1)^{\ell(w)}C^{\prime}_w\)</span>.</p>
<p>This function is not intended to be called directly. Instead, use
<tt class="xref py py-meth docutils literal"><span class="pre">hash_involution()</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A3&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s</span><span class="o">=</span><span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflection</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">.</span><span class="n">hash_involution_on_basis</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">-(v^-2)*T[1]</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">()</span>
<span class="go">-(v^-2)*T[1]</span>
<span class="gp">sage: </span><span class="n">h</span> <span class="o">=</span> <span class="n">T</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">T</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">v</span><span class="o">^</span><span class="mi">3</span> <span class="o">-</span> <span class="n">v</span><span class="o">^-</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">T</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">sage: </span><span class="n">h</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">()</span>
<span class="go">(v^-11+2*v^-8-v^-7)*T[1,2,3,2] + (v^-4)*T[1,2]</span>
<span class="gp">sage: </span><span class="n">h</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">()</span><span class="o">.</span><span class="n">hash_involution</span><span class="p">()</span> <span class="o">==</span> <span class="n">h</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.inverse_generator">
<tt class="descclassname">IwahoriHeckeAlgebra.T.</tt><tt class="descname">inverse_generator</tt><big>(</big><em>i</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.inverse_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the inverse of the <span class="math">\(i\)</span>-th generator, if it exists.</p>
<p>This method is only available if the Iwahori-Hecke algebra
parameters <tt class="docutils literal"><span class="pre">q1</span></tt> and <tt class="docutils literal"><span class="pre">q2</span></tt> are both invertible.  In this case,
the algebra generators are also invertible and this method returns
the inverse of <tt class="docutils literal"><span class="pre">self.algebra_generator(i)</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">P</span><span class="o">.&lt;</span><span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="o">&gt;=</span><span class="n">QQ</span><span class="p">[]</span>
<span class="gp">sage: </span><span class="n">F</span> <span class="o">=</span> <span class="n">Frac</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">q2</span><span class="o">=</span><span class="n">q2</span><span class="p">,</span> <span class="n">base_ring</span><span class="o">=</span><span class="n">F</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">H</span><span class="o">.</span><span class="n">base_ring</span><span class="p">()</span>
<span class="go">Fraction Field of Multivariate Polynomial Ring in q1, q2 over Rational Field</span>
<span class="gp">sage: </span><span class="n">H</span><span class="o">.</span><span class="n">inverse_generator</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">-1/(q1*q2)*T[1] + ((q1+q2)/(q1*q2))</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q1</span><span class="p">,</span> <span class="n">base_ring</span><span class="o">=</span><span class="n">F</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">H</span><span class="o">.</span><span class="n">inverse_generator</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">-(1/(-q1))*T[2] + ((q1-1)/(-q1))</span>
<span class="gp">sage: </span><span class="n">P1</span><span class="o">.&lt;</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H1</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;B2&quot;</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">q2</span><span class="o">=</span><span class="n">r2</span><span class="p">,</span> <span class="n">base_ring</span><span class="o">=</span><span class="n">P1</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">H1</span><span class="o">.</span><span class="n">base_ring</span><span class="p">()</span>
<span class="go">Multivariate Laurent Polynomial Ring in r1, r2 over Rational Field</span>
<span class="gp">sage: </span><span class="n">H1</span><span class="o">.</span><span class="n">inverse_generator</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">(-r1^-1*r2^-1)*T[2] + (r2^-1+r1^-1)</span>
<span class="gp">sage: </span><span class="n">H2</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;C2&quot;</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">base_ring</span><span class="o">=</span><span class="n">P1</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">H2</span><span class="o">.</span><span class="n">inverse_generator</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">(r1^-1)*T[2] + (-1+r1^-1)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.inverse_generators">
<tt class="descclassname">IwahoriHeckeAlgebra.T.</tt><tt class="descname">inverse_generators</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.inverse_generators" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the inverses of all the generators, if they exist.</p>
<p>This method is only available if <tt class="docutils literal"><span class="pre">q1</span></tt> and <tt class="docutils literal"><span class="pre">q2</span></tt> are invertible.
In that case, the algebra generators are also invertible.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">P</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">PolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">F</span> <span class="o">=</span> <span class="n">Frac</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">base_ring</span><span class="o">=</span><span class="n">F</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">U1</span><span class="p">,</span><span class="n">U2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">inverse_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">U1</span><span class="o">*</span><span class="n">T1</span><span class="p">,</span><span class="n">T1</span><span class="o">*</span><span class="n">U1</span>
<span class="go">(1, 1)</span>
<span class="gp">sage: </span><span class="n">P1</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H1</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">base_ring</span><span class="o">=</span><span class="n">P1</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="s">&quot;V&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">V1</span><span class="p">,</span><span class="n">V2</span> <span class="o">=</span> <span class="n">H1</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">W1</span><span class="p">,</span><span class="n">W2</span> <span class="o">=</span> <span class="n">H1</span><span class="o">.</span><span class="n">inverse_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">W1</span><span class="p">,</span><span class="n">W2</span><span class="p">]</span>
<span class="go">[(q^-1)*V[1] + (q^-1-1), (q^-1)*V[2] + (q^-1-1)]</span>
<span class="gp">sage: </span><span class="n">V1</span><span class="o">*</span><span class="n">W1</span><span class="p">,</span> <span class="n">W2</span><span class="o">*</span><span class="n">V2</span>
<span class="go">(1, 1)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.product_by_generator">
<tt class="descclassname">IwahoriHeckeAlgebra.T.</tt><tt class="descname">product_by_generator</tt><big>(</big><em>x</em>, <em>i</em>, <em>side='right'</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.product_by_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <span class="math">\(T_i \cdot x\)</span>, where <span class="math">\(T_i\)</span> is the <span class="math">\(i\)</span>-th generator. This is
coded individually for use in <tt class="docutils literal"><span class="pre">x._mul_()</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[];</span> <span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">algebra_generators</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">H</span><span class="o">.</span><span class="n">product_by_generator</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">]]</span>
<span class="go">[(q-1)*T[1] + q, T[2,1]]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">H</span><span class="o">.</span><span class="n">product_by_generator</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">side</span> <span class="o">=</span> <span class="s">&quot;left&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">]]</span>
<span class="go">[(q-1)*T[1] + q, T[1,2]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.product_by_generator_on_basis">
<tt class="descclassname">IwahoriHeckeAlgebra.T.</tt><tt class="descname">product_by_generator_on_basis</tt><big>(</big><em>w</em>, <em>i</em>, <em>side='right'</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.product_by_generator_on_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the product <span class="math">\(T_w T_i\)</span> (resp. <span class="math">\(T_i T_w\)</span>) if <tt class="docutils literal"><span class="pre">side</span></tt> is
<tt class="docutils literal"><span class="pre">'right'</span></tt> (resp. <tt class="docutils literal"><span class="pre">'left'</span></tt>).</p>
<p>If the quadratic relation is <span class="math">\((T_i-u)(T_i-v) = 0\)</span>, then we have</p>
<div class="math">
\[\begin{split}T_w T_i = \begin{cases}
T_{ws_i} &amp; \text{if } \ell(ws_i) = \ell(w) + 1, \\
(u+v) T_{ws_i} - uv T_w &amp; \text{if } \ell(w s_i) = \ell(w)-1.
\end{cases}\end{split}\]</div>
<p>The left action is similar.</p>
<p>INPUT:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">w</span></tt> &#8211; an element of the Coxeter group</li>
<li><tt class="docutils literal"><span class="pre">i</span></tt> &#8211; an element of the index set</li>
<li><tt class="docutils literal"><span class="pre">side</span></tt> &#8211; <tt class="docutils literal"><span class="pre">'right'</span></tt> (default) or <tt class="docutils literal"><span class="pre">'left'</span></tt></li>
</ul>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[];</span> <span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">product_by_generator_on_basis</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="p">]]</span>
<span class="go">[(q-1)*T[1] + q, T[2,1], T[1,2,1]]</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">product_by_generator_on_basis</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s">&quot;left&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="p">]]</span>
<span class="go">[(q-1)*T[1] + q, T[1,2], (q-1)*T[1,2] + q*T[2]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.product_on_basis">
<tt class="descclassname">IwahoriHeckeAlgebra.T.</tt><tt class="descname">product_on_basis</tt><big>(</big><em>w1</em>, <em>w2</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.product_on_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <span class="math">\(T_{w_1} T_{w_2}\)</span>, where <span class="math">\(w_1\)</span> and <span class="math">\(w_2\)</span> are words in the
Coxeter group.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">QQ</span><span class="p">[];</span> <span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="p">[</span><span class="n">T</span><span class="o">.</span><span class="n">product_on_basis</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">]]</span>
<span class="go">[(q-1)*T[1] + q, T[1,2]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.to_C_basis">
<tt class="descclassname">IwahoriHeckeAlgebra.T.</tt><tt class="descname">to_C_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.to_C_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <span class="math">\(T_w\)</span> as a linear combination of <span class="math">\(C\)</span>-basis elements.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">,</span> <span class="s">&#39;v&#39;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">v</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">gen</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A2&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">.</span><span class="n">to_C_basis</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="go">v*T[1] + v^2</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">))</span>
<span class="go">v*C[1] + v^2</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">v</span><span class="o">^-</span><span class="mi">1</span><span class="o">*</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span> <span class="o">-</span> <span class="n">v</span><span class="p">)</span>
<span class="go">C[1]</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="p">)</span><span class="o">+</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">+</span><span class="n">T</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="go">v^2*C[1,2] + (v+v^3)*C[1] + (v+v^3)*C[2] + (1+2*v^2+v^4)</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">))</span>
<span class="go">v^3*C[1,2,1] + v^4*C[1,2] + v^4*C[2,1] + v^5*C[1] + v^5*C[2] + v^6</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.to_Cp_basis">
<tt class="descclassname">IwahoriHeckeAlgebra.T.</tt><tt class="descname">to_Cp_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T.to_Cp_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <span class="math">\(T_w\)</span> as a linear combination of <span class="math">\(C^{\prime}\)</span>-basis
elements.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">v</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">QQ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&#39;A2&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">.</span><span class="n">to_Cp_basis</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="go">v*Cp[1] - 1</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">))</span>
<span class="go">v*Cp[1] - 1</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="go">v*Cp[1]</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="p">)</span><span class="o">+</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">+</span><span class="n">T</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="go">v^2*Cp[1,2]</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">))</span>
<span class="go">v^3*Cp[1,2,1] - v^2*Cp[1,2] - v^2*Cp[2,1] + v*Cp[1] + v*Cp[2] - 1</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.a_realization">
<tt class="descclassname">IwahoriHeckeAlgebra.</tt><tt class="descname">a_realization</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.a_realization" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a particular realization of <tt class="docutils literal"><span class="pre">self</span></tt> (the <span class="math">\(T\)</span>-basis).</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;B2&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span><span class="o">.</span><span class="n">a_realization</span><span class="p">()</span>
<span class="go">Iwahori-Hecke algebra of type B2 in 1,-1 over Integer Ring in the T-basis</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.cartan_type">
<tt class="descclassname">IwahoriHeckeAlgebra.</tt><tt class="descname">cartan_type</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.cartan_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Cartan type of <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;D4&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">cartan_type</span><span class="p">()</span>
<span class="go">[&#39;D&#39;, 4]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.coxeter_group">
<tt class="descclassname">IwahoriHeckeAlgebra.</tt><tt class="descname">coxeter_group</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.coxeter_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Coxeter group of <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;B2&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span>
<span class="go">Weyl Group of type [&#39;B&#39;, 2] (as a matrix group acting on the ambient space)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.q1">
<tt class="descclassname">IwahoriHeckeAlgebra.</tt><tt class="descname">q1</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.q1" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the parameter <span class="math">\(q_1\)</span> of <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;B2&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span><span class="o">.</span><span class="n">q1</span><span class="p">()</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.q2">
<tt class="descclassname">IwahoriHeckeAlgebra.</tt><tt class="descname">q2</tt><big>(</big><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.q2" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the parameter <span class="math">\(q_2\)</span> of <tt class="docutils literal"><span class="pre">self</span></tt>.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">IwahoriHeckeAlgebra</span><span class="p">(</span><span class="s">&quot;B2&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">H</span><span class="o">.</span><span class="n">q2</span><span class="p">()</span>
<span class="go">-1</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard">
<em class="property">class </em><tt class="descclassname">sage.algebras.iwahori_hecke_algebra.</tt><tt class="descname">IwahoriHeckeAlgebra_nonstandard</tt><big>(</big><em>W</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra" title="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra"><tt class="xref py py-class docutils literal"><span class="pre">sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra</span></tt></a></p>
<p>This is a class which is used behind the scenes by
<a class="reference internal" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra" title="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra"><tt class="xref py py-class docutils literal"><span class="pre">IwahoriHeckeAlgebra</span></tt></a> to compute the Kazhdan-Lusztig bases. It is
not meant to be used directly. It implements the slightly idiosyncratic
(but convenient) Iwahori-Hecke algebra with two parameters which is
defined over the Laurent polynomial ring <span class="math">\(\ZZ[u,u^{-1},v,v^{-1}]\)</span> in
two variables and has quadratic relations:</p>
<div class="math">
\[(T_r - u)(T_r + v^2/u) = 0.\]</div>
<p>The point of these relations is that the product of the two parameters is
<span class="math">\(v^2\)</span> which is a square in <span class="math">\(\ZZ[u,u^{-1},v,v^{-1}]\)</span>. Consequently, the
Kazhdan-Lusztig bases are defined for this algebra.</p>
<p>More generally, if we have a Iwahori-Hecke algebra with two parameters
which has quadratic relations of the form:</p>
<div class="math">
\[(T_r - q_1)(T_r - q_2) = 0\]</div>
<p>where <span class="math">\(-q_1 q_2\)</span> is a square then the Kazhdan-Lusztig bases are
well-defined for this algebra.  Moreover, these bases be computed by
specialization from the generic Iwahori-Hecke algebra using the
specialization which sends <span class="math">\(u \mapsto q_1\)</span> and <span class="math">\(v \mapsto \sqrt{-q_1 q_2}\)</span>,
so that <span class="math">\(v^2 / u \mapsto -q_2\)</span>.</p>
<p>For example, if <span class="math">\(q_1 = q = Q^2\)</span> and <span class="math">\(q_2 = -1\)</span> then <span class="math">\(u \mapsto q\)</span> and
<span class="math">\(v \mapsto \sqrt{q} = Q\)</span>; this is the standard presentation of the
Iwahori-Hecke algebra with <span class="math">\((T_r - q)(T_r + 1) = 0\)</span>. On the other hand,
when <span class="math">\(q_1 = q\)</span> and <span class="math">\(q_2 = -q^{-1}\)</span> then <span class="math">\(u \mapsto q\)</span> and <span class="math">\(v \mapsto 1\)</span>.
This is the normalized presentation with <span class="math">\((T_r - v)(T_r + v^{-1}) = 0\)</span>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class uses non-standard parameters for the Iwahori-Hecke algebra
and are related to the standard parameters by an outer automorphism
that is non-trivial on the <span class="math">\(T\)</span>-basis.</p>
</div>
<dl class="class">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.C">
<em class="property">class </em><tt class="descname">C</tt><big>(</big><em>IHAlgebra</em>, <em>prefix=None</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.C" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.C" title="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.C"><tt class="xref py py-class docutils literal"><span class="pre">sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.C</span></tt></a></p>
<p>The Kazhdan-Lusztig <span class="math">\(C\)</span>-basis for the generic Iwahori-Hecke algebra.</p>
<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.C.to_T_basis">
<tt class="descname">to_T_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.C.to_T_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <span class="math">\(C_w\)</span> as a linear combination of <span class="math">\(T\)</span>-basis elements.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">algebras</span><span class="o">.</span><span class="n">iwahori_hecke_algebra</span><span class="o">.</span><span class="n">IwahoriHeckeAlgebra_nonstandard</span><span class="p">(</span><span class="s">&quot;A3&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s3</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span><span class="o">.</span><span class="n">to_T_basis</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="go">(v^-1)*T[1] + (-u*v^-1)</span>
<span class="gp">sage: </span><span class="n">C</span><span class="o">.</span><span class="n">to_T_basis</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="p">)</span>
<span class="go">(v^-2)*T[1,2] + (-u*v^-2)*T[1] + (-u*v^-2)*T[2] + (u^2*v^-2)</span>
<span class="gp">sage: </span><span class="n">C</span><span class="o">.</span><span class="n">to_T_basis</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">)</span>
<span class="go">(v^-3)*T[1,2,1] + (-u*v^-3)*T[1,2] + (-u*v^-3)*T[2,1]</span>
<span class="go"> + (u^2*v^-3)*T[1] + (u^2*v^-3)*T[2] + (-u^3*v^-3)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">))</span>
<span class="go">(v^-3)*T[1,2,1] + (-u*v^-3)*T[1,2] + (-u*v^-3)*T[2,1]</span>
<span class="go"> + (u^2*v^-3)*T[1] + (u^2*v^-3)*T[2] + (-u^3*v^-3)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="o">*</span><span class="n">s3</span><span class="o">*</span><span class="n">s2</span><span class="p">))</span>
<span class="go">(v^-4)*T[2,3,1,2] + (-u*v^-4)*T[1,2,1] + (-u*v^-4)*T[3,1,2]</span>
<span class="go"> + (-u*v^-4)*T[2,3,1] + (-u*v^-4)*T[2,3,2] + (u^2*v^-4)*T[1,2]</span>
<span class="go"> + (u^2*v^-4)*T[2,1] + (u^2*v^-4)*T[3,1] + (u^2*v^-4)*T[2,3]</span>
<span class="go"> + (u^2*v^-4)*T[3,2] + (-u^3*v^-4)*T[1]</span>
<span class="go"> + (-u^3*v^-4-u*v^-2)*T[2] + (-u^3*v^-4)*T[3]</span>
<span class="go"> + (u^4*v^-4+u^2*v^-2)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.Cp">
<em class="property">class </em><tt class="descclassname">IwahoriHeckeAlgebra_nonstandard.</tt><tt class="descname">Cp</tt><big>(</big><em>IHAlgebra</em>, <em>prefix=None</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.Cp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.Cp" title="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.Cp"><tt class="xref py py-class docutils literal"><span class="pre">sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.Cp</span></tt></a></p>
<p>The Kazhdan-Lusztig <span class="math">\(C^{\prime}\)</span>-basis for the generic Iwahori-Hecke
algebra.</p>
<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.Cp.to_T_basis">
<tt class="descname">to_T_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.Cp.to_T_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <span class="math">\(C^{\prime}_w\)</span> as a linear combination of <span class="math">\(T\)</span>-basis
elements.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">algebras</span><span class="o">.</span><span class="n">iwahori_hecke_algebra</span><span class="o">.</span><span class="n">IwahoriHeckeAlgebra_nonstandard</span><span class="p">(</span><span class="s">&quot;A3&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span><span class="p">,</span><span class="n">s3</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="o">.</span><span class="n">to_T_basis</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="go">(v^-1)*T[1] + (u^-1*v)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="o">.</span><span class="n">to_T_basis</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="p">)</span>
<span class="go">(v^-2)*T[1,2] + (u^-1)*T[1] + (u^-1)*T[2] + (u^-2*v^2)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="o">.</span><span class="n">to_T_basis</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">)</span>
<span class="go">(v^-3)*T[1,2,1] + (u^-1*v^-1)*T[1,2] + (u^-1*v^-1)*T[2,1]</span>
<span class="go"> + (u^-2*v)*T[1] + (u^-2*v)*T[2] + (u^-3*v^3)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">))</span>
<span class="go">(v^-3)*T[1,2,1] + (u^-1*v^-1)*T[1,2] + (u^-1*v^-1)*T[2,1]</span>
<span class="go"> + (u^-2*v)*T[1] + (u^-2*v)*T[2] + (u^-3*v^3)</span>
<span class="gp">sage: </span><span class="n">T</span><span class="p">(</span><span class="n">Cp</span><span class="p">(</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="o">*</span><span class="n">s3</span><span class="o">*</span><span class="n">s2</span><span class="p">))</span>
<span class="go">(v^-4)*T[2,3,1,2] + (u^-1*v^-2)*T[1,2,1] + (u^-1*v^-2)*T[3,1,2]</span>
<span class="go"> + (u^-1*v^-2)*T[2,3,1] + (u^-1*v^-2)*T[2,3,2] + (u^-2)*T[1,2]</span>
<span class="go"> + (u^-2)*T[2,1] + (u^-2)*T[3,1] + (u^-2)*T[2,3]</span>
<span class="go"> + (u^-2)*T[3,2] + (u^-3*v^2)*T[1] + (u^-1+u^-3*v^2)*T[2]</span>
<span class="go"> + (u^-3*v^2)*T[3] + (u^-2*v^2+u^-4*v^4)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.T">
<em class="property">class </em><tt class="descclassname">IwahoriHeckeAlgebra_nonstandard.</tt><tt class="descname">T</tt><big>(</big><em>algebra</em>, <em>prefix=None</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.T" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T" title="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T"><tt class="xref py py-class docutils literal"><span class="pre">sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra.T</span></tt></a></p>
<p>The <span class="math">\(T\)</span>-basis for the generic Iwahori-Hecke algebra.</p>
<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.T.to_C_basis">
<tt class="descname">to_C_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.T.to_C_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <span class="math">\(T_w\)</span> as a linear combination of <span class="math">\(C\)</span>-basis elements.</p>
<p>To compute this we piggy back off the <span class="math">\(C^{\prime}\)</span>-basis
conversion using the observation that the hash involution sends
<span class="math">\(T_w\)</span> to <span class="math">\((-q_1 q_1)^{\ell(w)} T_w\)</span> and <span class="math">\(C_w\)</span> to
<span class="math">\((-1)^{\ell(w)} C^{\prime}_w\)</span>. Therefore, if</p>
<div class="math">
\[T_w = \sum_v a_{vw} C^{\prime}_v\]</div>
<p>then</p>
<div class="math">
\[T_w = (-q_1 q_2)^{\ell(w)} \Big( \sum_v a_{vw} C^{\prime}_v
                                 \Big)^\#
    = \sum_v (-1)^{\ell(v)} \overline{a_{vw}} C_v\]</div>
<p>Note that we cannot just apply <tt class="xref py py-meth docutils literal"><span class="pre">hash_involution()</span></tt> here because
this involution always returns the answer with respect to the
same basis.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">algebras</span><span class="o">.</span><span class="n">iwahori_hecke_algebra</span><span class="o">.</span><span class="n">IwahoriHeckeAlgebra_nonstandard</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">C</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">C</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">.</span><span class="n">to_C_basis</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="go">v*T[1] + u</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">))</span>
<span class="go">v*C[1] + u</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">(</span> <span class="n">C</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">))</span>
<span class="go">C[1]</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="p">)</span><span class="o">+</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">+</span><span class="n">T</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="go">v^2*C[1,2] + (u*v+v)*C[1] + (u*v+v)*C[2] + (u^2+2*u+1)</span>
<span class="gp">sage: </span><span class="n">C</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">))</span>
<span class="go">v^3*C[1,2,1] + u*v^2*C[1,2] + u*v^2*C[2,1] + u^2*v*C[1] + u^2*v*C[2] + u^3</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.T.to_Cp_basis">
<tt class="descname">to_Cp_basis</tt><big>(</big><em>w</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.IwahoriHeckeAlgebra_nonstandard.T.to_Cp_basis" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <span class="math">\(T_w\)</span> as a linear combination of <span class="math">\(C^{\prime}\)</span>-basis
elements.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">H</span> <span class="o">=</span> <span class="n">sage</span><span class="o">.</span><span class="n">algebras</span><span class="o">.</span><span class="n">iwahori_hecke_algebra</span><span class="o">.</span><span class="n">IwahoriHeckeAlgebra_nonstandard</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">s1</span><span class="p">,</span><span class="n">s2</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">coxeter_group</span><span class="p">()</span><span class="o">.</span><span class="n">simple_reflections</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">T</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">Cp</span> <span class="o">=</span> <span class="n">H</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
<span class="gp">sage: </span><span class="n">T</span><span class="o">.</span><span class="n">to_Cp_basis</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="go">v*Cp[1] + (-u^-1*v^2)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">))</span>
<span class="go">v*Cp[1] + (-u^-1*v^2)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="go">v*Cp[1] + (-u^-1*v^2+1)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="p">)</span><span class="o">+</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span><span class="o">+</span><span class="n">T</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="go">v^2*Cp[1,2] + (-u^-1*v^3+v)*Cp[1] + (-u^-1*v^3+v)*Cp[2] + (u^-2*v^4-2*u^-1*v^2+1)</span>
<span class="gp">sage: </span><span class="n">Cp</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">s1</span><span class="o">*</span><span class="n">s2</span><span class="o">*</span><span class="n">s1</span><span class="p">))</span>
<span class="go">v^3*Cp[1,2,1] + (-u^-1*v^4)*Cp[1,2] + (-u^-1*v^4)*Cp[2,1]</span>
<span class="go"> + (u^-2*v^5)*Cp[1] + (u^-2*v^5)*Cp[2] + (-u^-3*v^6)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</dd></dl>

<dl class="function">
<dt id="sage.algebras.iwahori_hecke_algebra.index_cmp">
<tt class="descclassname">sage.algebras.iwahori_hecke_algebra.</tt><tt class="descname">index_cmp</tt><big>(</big><em>x</em>, <em>y</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.index_cmp" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare two term indices <tt class="docutils literal"><span class="pre">x</span></tt> and <tt class="docutils literal"><span class="pre">y</span></tt> by Bruhat order, then by word
length, and then by the generic comparison.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.algebras.iwahori_hecke_algebra</span> <span class="kn">import</span> <span class="n">index_cmp</span>
<span class="gp">sage: </span><span class="n">W</span> <span class="o">=</span> <span class="n">WeylGroup</span><span class="p">([</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">x</span> <span class="o">=</span> <span class="n">W</span><span class="o">.</span><span class="n">from_reduced_word</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">y</span> <span class="o">=</span> <span class="n">W</span><span class="o">.</span><span class="n">from_reduced_word</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">sage: </span><span class="n">x</span><span class="o">.</span><span class="n">bruhat_le</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">sage: </span><span class="n">index_cmp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sage.algebras.iwahori_hecke_algebra.normalized_laurent_polynomial">
<tt class="descclassname">sage.algebras.iwahori_hecke_algebra.</tt><tt class="descname">normalized_laurent_polynomial</tt><big>(</big><em>R</em>, <em>p</em><big>)</big><a class="headerlink" href="#sage.algebras.iwahori_hecke_algebra.normalized_laurent_polynomial" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a normalized version of the (Laurent polynomial) <tt class="docutils literal"><span class="pre">p</span></tt> in the
ring <tt class="docutils literal"><span class="pre">R</span></tt>.</p>
<p>Various ring operations in <tt class="docutils literal"><span class="pre">sage</span></tt> return an element of the field of
fractions of the parent ring even though the element is &#8220;known&#8221; to belong to
the base ring. This function is a hack to recover from this. This occurs
somewhat haphazardly with Laurent polynomial rings:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;=</span><span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">(</span><span class="n">q</span><span class="o">**-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">coefficients</span><span class="p">()]</span>
<span class="go">[&lt;type &#39;sage.rings.integer.Integer&#39;&gt;]</span>
</pre></div>
</div>
<p>It also happens in any ring when dividing by units:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="nb">type</span> <span class="p">(</span> <span class="mi">3</span><span class="o">/</span><span class="mi">1</span> <span class="p">)</span>
<span class="go">&lt;type &#39;sage.rings.rational.Rational&#39;&gt;</span>
<span class="gp">sage: </span><span class="nb">type</span> <span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="o">/-</span><span class="mi">1</span> <span class="p">)</span>
<span class="go">&lt;type &#39;sage.rings.rational.Rational&#39;&gt;</span>
</pre></div>
</div>
<p>This function is a variation on a suggested workaround of Nils Bruin.</p>
<p>EXAMPLES:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">sage: </span><span class="kn">from</span> <span class="nn">sage.algebras.iwahori_hecke_algebra</span> <span class="kn">import</span> <span class="n">normalized_laurent_polynomial</span>
<span class="gp">sage: </span><span class="nb">type</span> <span class="p">(</span> <span class="n">normalized_laurent_polynomial</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span> <span class="mi">3</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span> <span class="p">)</span>
<span class="go">&lt;type &#39;sage.rings.integer.Integer&#39;&gt;</span>
<span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">q</span><span class="o">&gt;=</span><span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">)</span>
<span class="gp">sage: </span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">normalized_laurent_polynomial</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">q</span><span class="o">**-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">coefficients</span><span class="p">()]</span>
<span class="go">[&lt;type &#39;sage.rings.integer.Integer&#39;&gt;]</span>
<span class="gp">sage: </span><span class="n">R</span><span class="o">.&lt;</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="o">&gt;=</span><span class="n">LaurentPolynomialRing</span><span class="p">(</span><span class="n">ZZ</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">p</span><span class="o">=</span><span class="n">normalized_laurent_polynomial</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">u</span><span class="o">**-</span><span class="mi">1</span><span class="o">*</span><span class="n">v</span><span class="o">**-</span><span class="mi">1</span><span class="o">+</span><span class="n">u</span><span class="o">*</span><span class="n">v</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">ui</span><span class="o">=</span><span class="n">normalized_laurent_polynomial</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">u</span><span class="o">^-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">vi</span><span class="o">=</span><span class="n">normalized_laurent_polynomial</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">v</span><span class="o">^-</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">sage: </span><span class="n">p</span><span class="p">(</span><span class="n">ui</span><span class="p">,</span><span class="n">vi</span><span class="p">)</span>
<span class="go">2*u*v + u^-1*v^-1</span>
<span class="gp">sage: </span><span class="n">q</span><span class="o">=</span> <span class="n">u</span><span class="o">+</span><span class="n">v</span><span class="o">+</span><span class="n">ui</span>
<span class="gp">sage: </span><span class="n">q</span><span class="p">(</span><span class="n">ui</span><span class="p">,</span><span class="n">vi</span><span class="p">)</span>
<span class="go">u + v^-1 + u^-1</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h4>Previous topic</h4>
            <p class="topless"><a href=""
                                  title="previous chapter">Iwahori-Hecke Algebras</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="nil_coxeter_algebra.html"
                                  title="next chapter">Nil-Coxeter Algebra</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/sage/algebras/iwahori_hecke_algebra.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../../search.html" method="get">
                <input type="text" name="q" size="18" />
               <!-- The shading of the "Go" button should be consistent -->
               <!-- with the colour of the header and footer. See the file -->
               <!-- doc/common/themes/sage/theme.conf for colours used by -->
               <!-- the Sage theme. -->
                <input type="submit" style="background-color: #B8B9F6" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="nil_coxeter_algebra.html" title="Nil-Coxeter Algebra"
             >next</a> |</li>
        <li class="right" >
          <a href="#" title="Iwahori-Hecke Algebras"
             >previous</a> |</li>
  
    
      <a href="../../../../index.html"><img src="../../../_static/sagelogo.png" style="vertical-align: middle" title="Sage Logo"></a>
    
  
  
        <li><a href="../../index.html">Algebras</a> &raquo;</li>
 
      </ul>
    </div>
    
    <div class="footer">
        &copy; Copyright 2005--2015, The Sage Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
    <script type="text/javascript">
/*global jQuery, window */
/* Sphinx sidebar toggle.  Putting this code at the end of the body
 * enables the toggle for the live, static, and offline docs.  Note:
 * sage.misc.html.math_parse() eats jQuery's dollar-sign shortcut. */
var jq = jQuery;
jq(document).ready(function () {
    var bar, bod, bg, fg, key, tog, wid_old, wid_new, resize, get_state, set_state;
    bod = jq('div.bodywrapper');
    bar = jq('div.sphinxsidebar');
    tog = jq('<div class="sphinxsidebartoggle"></div>');

    /* Delayed resize helper.  Not perfect but good enough. */
    resize = function () {
        setTimeout(function () {
            tog.height(bod.height());
        }, 100);
    };
    jq(window).resize(function () {
        resize();
    });

    /* Setup and add the toggle. See Sphinx v0.5.1 default.css. */
    fg = jq('div.sphinxsidebar p a').css('color') || 'rgb(152, 219, 204)';
    bg = jq('div.document').css('background-color') || 'rgb(28, 78, 99)';
    wid_old = '230px';
    wid_new = '5px';
    tog.css('background-color', bg)
        .css('border-width', '0px')
        .css('border-right', wid_new + ' ridge ' + bg)
        .css('cursor', 'pointer')
        .css('position', 'absolute')
        .css('left', '-' + wid_new)
        .css('top', '0px')
        .css('width', wid_new);
    bod.css('position', 'relative');
    bod.prepend(tog);
    resize();

    /* Cookie helpers. */
    key = 'sphinxsidebar=';
    set_state = function (s) {
        var date = new Date();
        /* Expiry in 7 days. */
        date.setTime(date.getTime() + (7 * 24 * 3600 * 1000));
        document.cookie = key + encodeURIComponent(s) + '; expires=' +
            date.toUTCString() + '; path=/';
    };
    get_state = function () {
        var i, c, crumbs = document.cookie.split(';');
        for (i = 0; i < crumbs.length; i += 1) {
            c = crumbs[i].replace(/^\s+/, '');
            if (c.indexOf(key) === 0) {
                return decodeURIComponent(c.substring(key.length, c.length));
            }
        }
        return null;
    };

    /* Event handlers. */
    tog.mouseover(function (ev) {
        tog.css('border-right-color', fg);
    }).mouseout(function (ev) {
        tog.css('border-right-color', bg);
    }).click(function (ev) {
        if (bod.hasClass('wide')) {
            bod.removeClass('wide');
            bod.css('margin-left', wid_old);
            bar.css('width', wid_old);
            bar.show();
            set_state('visible');
        } else {
            set_state('hidden');
            bar.hide();
            bar.css('width', '0px');
            bod.css('margin-left', wid_new);
            bod.addClass('wide');
        }
        resize();
    });

    /* Hide the normally visible sidebar? */
    if (get_state() === 'hidden') {
        tog.trigger('click');
    } else {
        set_state('visible');
    }
});
    </script>
  </body>
</html>